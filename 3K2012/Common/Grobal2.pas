unit Grobal2;//全局(服务器和客户端通用)消息,数据结构,函数等

interface

uses
  Windows, Classes, JSocket;
const
  M2var = 1;//处理物品btValue14-19属性，按JS模式，同时改变AddValue[2]＝255做标识，过N版后去掉 20110528
  M2Sion = 0;//测试(显示与DBS的通讯问题)
  M2Version = 2; //0-0627版程序(非连击+内功) 1-最新版(内功+连击版) 2-1.76版(无内功,无连击)
  {$IF M2Version = 2}
  HEROVERSION = 0; //0-企业版(无英雄) 1-英雄版
  {$ELSE}
  HEROVERSION = 1; //0-企业版(无英雄) 1-英雄版
  {$IFEND}
  CLIENT_VERSION_NUMBER = 920121015;//9+客户端版本号 20091025，当小于20080512时，Run网关会把玩家T了，RUN代码中检查自己的G单元的日期(20080512)
  MAXPATHLEN = 255;
  DIRPATHLEN = 80;
  MAPNAMELEN = 16;//地图名长度
  ACTORNAMELEN = 14;//名字长度
  DEFBLOCKSIZE = {16}22;//20081221
  BUFFERSIZE = 10000; //缓冲定义 影响人物数据格式 GetCodeMsgSize(SizeOf(THumDataInfo) * 4 / 3)
  DATA_BUFSIZE2 = 16348; //8192;
  DATA_BUFSIZE = 8192; //8192;
  GROUPMAX = 11;
  BAGGOLD = 5000000;
  BODYLUCKUNIT = 10;
  MAX_STATUS_ATTRIBUTE = 12;//最大状态数         \

//传奇中人物只有8个方向,但是打符,锲蛾飞行,神鹰都有16方向 (...从锲蛾开始是放屁 by TasNat)
  DR_UP = 0;//正北
  DR_UPRIGHT = 1;//东北向
  DR_RIGHT = 2; //东
  DR_DOWNRIGHT = 3;//东南向
  DR_DOWN = 4;//南
  DR_DOWNLEFT = 5;//西南向
  DR_LEFT = 6;//西
  DR_UPLEFT = 7;//西北向

  MAXORDERSCOUNT = 2000;//排行榜保存数量

//装备项目
  U_DRESS = 0; //衣服
  U_WEAPON = 1; //武器
  U_RIGHTHAND = 2; //勋章,腊,火把
  U_NECKLACE = 3; //项链
  U_HELMET = 4; //头盔
  U_ARMRINGL = 5; //左手手镯,符
  U_ARMRINGR = 6;//右手手镯
  U_RINGL = 7;  //左戒指
  U_RINGR = 8;//右戒指
  U_BUJUK = 9; //物品
  U_BELT = 10; //腰带
  U_BOOTS = 11; //鞋
  U_CHARM = 12; //宝石
  U_ZHULI = 13;//斗笠
  U_DRUM = 14;//军鼓
  U_TakeItemCount=15;
  X_RepairFir = 20; //修补火龙之心

  POISON_LOCK1 = 2;//敌对目标的防御和魔防减到0(唯我独尊)
  POISON_LOCKSPELL = 7;//被冰冻，不能攻击，不能跑，不能走
  POISON_DECHEALTH = 0;//中毒类型：绿毒,减血
  POISON_DAMAGEARMOR = 1;//中毒类型：红毒
  STATE_LOCKRUN = 3;//不能跑动(中蛛网) 20080811
  POISON_DONTMOVE = 4;//不能移动，中战连击 20090903
  POISON_STONE = 5; //中毒类型:麻痹
  POISON_SKILLDECHEALTH = 6;//中毒类型：减血，被连击技能万剑归宗击中后掉血 20090626

  STATE_STONE_MODE = 1;//被石化
  STATE_TRANSPARENT = 8;//隐身
  STATE_DEFENCEUP = 9;//神圣战甲术(防御力)
  STATE_MAGDEFENCEUP = 10;//幽灵盾(魔御力)
  STATE_BUBBLEDEFENCEUP = 11;//魔法盾

  USERMODE_PLAYGAME = 1;
  USERMODE_LOGIN = 2;
  USERMODE_LOGOFF = 3;
  USERMODE_NOTICE = 4;

  RUNGATEMAX = 20;

  RUNGATECODE = $AA55AA55;

  OS_MOVINGOBJECT = 1;//移动对像
  OS_ITEMOBJECT = 2;//物品
  OS_EVENTOBJECT = 3;//场景
  OS_GATEOBJECT = 4;//地图连接点
  OS_SWITCHOBJECT = 5;
  OS_MAPEVENT = 6;
  OS_DOOR = 7;//门
  OS_ROON = 8;

  RC_PLAYOBJECT = 0;//人物
  RC_PLAYMOSTER = 150; //人形怪物
  RC_HEROOBJECT = 66; //英雄
  RC_GUARD = 12; //大刀守卫
  RC_PEACENPC = 15;
  RC_ANIMAL = 50;
  RC_MONSTER = 80;
  RC_NPC = 10;//NPC
  RC_ARCHERGUARD = 112;//NPC 弓箭手


  RCC_USERHUMAN = RC_PLAYOBJECT;
  RCC_GUARD = RC_GUARD;
  RCC_MERCHANT = RC_ANIMAL;

  //ISM_WHISPER = 1234;//20091022 注释
//-------------------------客户端向DBS发送消息指令------------------------------
  CM_QUERYCHR = 100;  //登录成功,客户端显出左右角色的那一瞬
  CM_NEWCHR = 101;      //创建角色
  CM_DELCHR = 102;      //删除角色
  CM_SELCHR = 103;      //选择角色
  CM_SELECTSERVER = 104;//查询服务器名称,注意不是选区,盛大一区往往有(至多8个??group.dat中是这么写的)不止一个的服务器
  CM_QUERYDELCHR = 105;//查询删除过的角色信息 20080706
  CM_RESDELCHR = 106;//恢复删除的角色 20080706
  CM_HARDWARECODE = 107;
//------------------------LoginSrv.exe 使用-------------------------------------
  CM_PROTOCOL = 2000;//检查版本号(LoginSrv nVersionDate变量),3K客户端未使用
  CM_IDPASSWORD = 2001; //客户端向服务器发送ID和密码
  CM_ADDNEWUSER = 2002; //新建用户,就是注册新账号,登录时选择了"新用户"并操作成功
  CM_CHANGEPASSWORD = 2003;  //修改密码
  CM_UPDATEUSER = 2004;  //更新注册资料??
  //CM_RANDOMCODE = 2006;//取验证码 20080612 未使用
  SM_RANDOMCODE = 2007;
  CM_CLIENTCONN = 2008;//客户端连接，通知账号程序发来服务器信息 20090310
  CM_GETBACKPASSWORD = 2010; //密码找回

  SM_RUSH = 6; //跑动中改变方向
  SM_RUSHKUNG = 7; //野蛮冲撞
  SM_FIREHIT = 8; //烈火
  SM_BACKSTEP = 9; //后退,野蛮效果? //半兽统领公箭手攻击玩家的后退??axemon.pas中procedure   TDualAxeOma.Run
  SM_TURN = 10; //转向
  SM_WALK = 11; //走
  SM_SITDOWN = 12;
  SM_RUN = 13; //跑
  SM_HIT = 14; //砍
  SM_HEAVYHIT = 15; //
  SM_BIGHIT = 16; //
  SM_SPELL = 17; //使用魔法
  SM_POWERHIT = 18;//攻杀
  SM_LONGHIT = 19; //刺杀
  SM_DIGUP = 20;//挖是一"起"一"坐",这里是挖动作的"起"
  SM_DIGDOWN = 21;//挖动作的"坐"
  SM_FLYAXE = 22;//飞斧,半兽统领的攻击方式?
  SM_LIGHTING = 23;//免蜡开关
  SM_WIDEHIT = 24; //半月
  SM_CRSHIT = 25; //抱月刀
  SM_TWINHIT = 26; //开天斩重击
  SM_ALIVE = 27; //复活??复活戒指
  SM_MOVEFAIL = 28; //移动失败,走动或跑动
  SM_HIDE = 29; //隐身?
  SM_DISAPPEAR = 30;//地上物品消失
  SM_STRUCK = 31; //受攻击
  SM_DEATH = 32; //正常死亡
  SM_SKELETON = 33; //尸体
  SM_NOWDEATH = 34; //秒杀

  SM_HEAR = 40;  //有人回你的话
  SM_FEATURECHANGED = 41;
  SM_USERNAME = 42;
  SM_WINEXP = 44;//获得经验
  SM_LEVELUP = 45; //升级,左上角出现墨绿的升级字样
  SM_DAYCHANGING = 46;//传奇界面右下角的太阳星星月亮

  SM_LOGON = 50;//logon
  SM_NEWMAP = 51; //新地图??
  SM_ABILITY = 52;//打开属性对话框,F11
  SM_HEALTHSPELLCHANGED = 53;//治愈术使你的体力增加
  SM_MAPDESCRIPTION = 54;//地图描述,行会战地图?攻城区域?安全区域?
  //SM_SPELL2 = 117;//20090901 未使用
  
  SM_CIDHIT = 57; //龙影剑法
  SM_4FIREHIT = 58; //4级烈火 20080112
  SM_QTWINHIT = 59; //开天斩轻击
  SM_LONGHIT4 = 60;//四级刺杀
  SM_WIDEHIT4 = 61;//圆月弯刀

  SM_ACTION_MIN = SM_RUSH;
  SM_ACTION_MAX = SM_WIDEHIT;
  SM_ACTION2_MIN = 65072;
  SM_ACTION2_MAX = 65073;
  SM_AddEffecItemList= 1207;
//对话消息
  SM_MOVEMESSAGE = 99;
  SM_SYSMESSAGE = 100; //系统消息,盛大一般红字,私服蓝字
  SM_GROUPMESSAGE = 101;//组内聊天!!
  SM_CRY = 102; //喊话
  SM_WHISPER = 103;//私聊
  SM_GUILDMESSAGE = 104;  //行会聊天!~

  SM_ADDITEM = 200;
  SM_BAGITEMS = 201;
  SM_DELITEM = 202;
  SM_UPDATEITEM = 203;
  SM_ADDMAGIC = 210;
  SM_SENDMYMAGIC = 211;
  SM_DELMAGIC = 212;

 //服务器端发送的命令 SM:server msg,服务端向客户端发送的消息

//登录、新帐号、新角色、查询角色等  
  SM_CERTIFICATION_FAIL = 501;
  SM_ID_NOTFOUND = 502;
  SM_PASSWD_FAIL = 503;//验证失败,"服务器验证失败,需要重新登录"??
  SM_NEWID_SUCCESS = 504;//创建新账号成功
  SM_NEWID_FAIL = 505; //创建新账号失败
  SM_CHGPASSWD_SUCCESS = 506; //修改密码成功
  SM_CHGPASSWD_FAIL = 507;  //修改密码失败
  SM_GETBACKPASSWD_SUCCESS = 508; //密码找回成功
  SM_GETBACKPASSWD_FAIL = 509; //密码找回失败

  SM_QUERYCHR = 520; //返回角色信息到客户端
  SM_NEWCHR_SUCCESS = 521; //新建角色成功
  SM_NEWCHR_FAIL = 522; //新建角色失败
  SM_DELCHR_SUCCESS = 523; //删除角色成功
  SM_DELCHR_FAIL = 524; //删除角色失败
  SM_STARTPLAY = 525; //开始进入游戏世界(点了健康游戏忠告后进入游戏画面)
  SM_STARTFAIL = 526; ////开始失败,玩传奇深有体会,有时选择角色,点健康游戏忠告后黑屏

  SM_QUERYCHR_FAIL = 527;//返回角色信息到客户端失败
  SM_OUTOFCONNECTION = 528; //超过最大连接数,强迫用户下线
  SM_SELECTSERVER = 529;  //发送服的信息，开始选服 20090309
  SM_SELECTSERVER_OK = 530;  //选服成功
  SM_PASSOK = 539;//输入密码正确后，返回给客户端2009030
  SM_NEEDUPDATE_ACCOUNT = 531;//需要更新,注册后的ID会发生什么变化?私服中的普通ID经过充值??或者由普通ID变为会员ID,GM?
  SM_UPDATEID_SUCCESS = 532; //更新成功
  SM_UPDATEID_FAIL = 533;  //更新失败

  SM_QUERYDELCHR = 534;//返回删除过的角色 20080706
  SM_QUERYDELCHR_FAIL = 535;//返回删除过的角色失败 20080706
  SM_RESDELCHR_SUCCESS = 536;//恢复删除角色成功 20080706
  SM_RESDELCHR_FAIL = 537;//恢复删除角色失败 20080706
  SM_NOCANRESDELCHR = 538;//禁止恢复删除角色,即不可查看 200800706

  SM_DROPITEM_SUCCESS = 600;
  SM_DROPITEM_FAIL = 601;

  SM_ITEMSHOW = 610;
  SM_ITEMHIDE = 611;
  //  SM_DOOROPEN           = 612;
  SM_OPENDOOR_OK = 612; //通过过门点成功
  SM_OPENDOOR_LOCK = 613;//发现过门口是封锁的,以前盛大秘密通道去赤月的门要5分钟开一次
  SM_CLOSEDOOR = 614;//用户过门,门自行关闭
  SM_TAKEON_OK = 615;
  SM_TAKEON_FAIL = 616;
  SM_TAKEOFF_OK = 619;
  SM_TAKEOFF_FAIL = 620;
  SM_SENDUSEITEMS = 621;
  SM_WEIGHTCHANGED = 622;
  SM_CLEAROBJECTS = 633;
  SM_CHANGEMAP = 634; //地图改变,进入新地图
  SM_EAT_OK = 635;
  SM_EAT_FAIL = 636;
  SM_BUTCH = 637; //野蛮?
  SM_MAGICFIRE = 638; //地狱火,火墙??
  SM_MAGICFIRE_FAIL = 639;
  SM_MAGIC_LVEXP = 640;
  SM_DURACHANGE = 642;
  SM_MERCHANTSAY = 643;
  SM_MERCHANTDLGCLOSE = 644;
  SM_SENDGOODSLIST = 645;
  SM_SENDUSERSELL = 646;
  SM_SENDBUYPRICE = 647;
  SM_USERSELLITEM_OK = 648;
  SM_USERSELLITEM_FAIL = 649;
  SM_BUYITEM_SUCCESS = 650; //?
  SM_BUYITEM_FAIL = 651; //?
  SM_SENDDETAILGOODSLIST = 652;
  SM_GOLDCHANGED = 653;
  SM_CHANGELIGHT = 654; //负重改变
  SM_LAMPCHANGEDURA = 655;//蜡烛持久改变
  SM_CHANGENAMECOLOR = 656;//名字颜色改变,白名,灰名,红名,黄名
  SM_CHARSTATUSCHANGED = 657;
  SM_SENDNOTICE = 658; //发送健康游戏忠告(公告)
  SM_GROUPMODECHANGED = 659;//组队模式改变
  SM_CREATEGROUP_OK = 660;
  SM_CREATEGROUP_FAIL = 661;
  SM_GROUPADDMEM_OK = 662;
  SM_GROUPDELMEM_OK = 663;
  SM_GROUPADDMEM_FAIL = 664;
  SM_GROUPDELMEM_FAIL = 665;
  SM_GROUPCANCEL = 666;
  SM_GROUPMEMBERS = 667;
  SM_SENDUSERREPAIR = 668;
  SM_USERREPAIRITEM_OK = 669;
  SM_USERREPAIRITEM_FAIL = 670;
  SM_SENDREPAIRCOST = 671;
  SM_DEALMENU = 673;
  SM_DEALTRY_FAIL = 674;
  SM_DEALADDITEM_OK = 675;
  SM_DEALADDITEM_FAIL = 676;
  SM_DEALDELITEM_OK = 677;
  SM_DEALDELITEM_FAIL = 678;
  SM_DEALCANCEL = 681;
  SM_DEALREMOTEADDITEM = 682;
  SM_DEALREMOTEDELITEM = 683;
  SM_DEALCHGGOLD_OK = 684;
  SM_DEALCHGGOLD_FAIL = 685;
  SM_DEALREMOTECHGGOLD = 686;
  SM_DEALSUCCESS = 687;
  SM_SENDUSERSTORAGEITEM = 700;//存移动仓库
  SM_STORAGE_OK = 701;
  SM_STORAGE_FULL = 702;
  SM_STORAGE_FAIL = 703;
  SM_SAVEITEMLIST = 704;
  SM_TAKEBACKSTORAGEITEM_OK = 705;
  SM_TAKEBACKSTORAGEITEM_FAIL = 706;
  SM_TAKEBACKSTORAGEITEM_FULLBAG = 707;

  SM_AREASTATE = 708; //周围状态
  SM_MYSTATUS = 766;//我的状态,最近一次下线状态,如是否被毒,挂了就强制回城

  SM_DELITEMS = 709;
  SM_READMINIMAP_OK = 710;
  SM_READMINIMAP_FAIL = 711;
  SM_SENDUSERMAKEDRUGITEMLIST = 712;
  SM_MAKEDRUG_SUCCESS = 713;
  SM_UPSENDMSGCOUNT = 714;//同步客户端与M2的发消息次数
  //  716
  SM_MAKEDRUG_FAIL = 65036;

  SM_CHANGEGUILDNAME = 750;
  SM_SENDUSERSTATE = 751; //
  SM_SUBABILITY = 752; //打开输助属性对话框
  SM_OPENGUILDDLG = 753; //
  SM_OPENGUILDDLG_FAIL = 754; //
  SM_SENDGUILDMEMBERLIST = 756; //
  SM_GUILDADDMEMBER_OK = 757; //
  SM_GUILDADDMEMBER_FAIL = 758;
  SM_GUILDDELMEMBER_OK = 759;
  SM_GUILDDELMEMBER_FAIL = 760;
  SM_GUILDRANKUPDATE_FAIL = 761;
  SM_BUILDGUILD_OK = 762;
  SM_BUILDGUILD_FAIL = 763;
  SM_DONATE_OK = 764;
  SM_DONATE_FAIL = 765;

  SM_MENU_OK = 767; //?
  SM_GUILDMAKEALLY_OK = 768;
  SM_GUILDMAKEALLY_FAIL = 769;
  SM_GUILDBREAKALLY_OK = 770; //?
  SM_GUILDBREAKALLY_FAIL = 771; //?
  SM_DLGMSG = 772; //Jacky
  SM_SPACEMOVE_HIDE = 800;//道士走一下隐身
  SM_SPACEMOVE_SHOW = 801;//道士走一下由隐身变为现身
  SM_RECONNECT = 802; //与服务器重连
  SM_GHOST = 803; //尸体清除,虹魔教主死的效果?
  SM_SHOWEVENT = 804;//显示事件
  SM_HIDEEVENT = 805;//隐藏事件
  SM_SPACEMOVE_HIDE2 = 806;
  SM_SPACEMOVE_SHOW2 = 807;
  SM_TIMECHECK_MSG = 810; //时钟检测,以免客户端作弊
  SM_ADJUST_BONUS = 811; //发送附加属性值

  SM_ITEMUPDATE = 1500;
  SM_MONSTERSAY = 1501;

  SM_EXCHGTAKEON_OK = 65023;
  SM_EXCHGTAKEON_FAIL = 65024;

  SM_TEST = 65037;//
  SM_TESTHERO = 65038;//无用消息
  SM_THROW = 65069;
  RM_SendItemEffs = 8000;//
  RM_DELITEMS = 9000; //Jacky
  RM_TURN = 10001;
  RM_WALK = 10002;
  RM_RUN = 10003;
  RM_HIT = 10004;
  RM_HEAVYHIT = 10005;
  RM_BIGHIT = 10006;  
  RM_SPELL = 10007;
  RM_SPELL2 = 10008;
  RM_LONGHIT4 = 10009;//四级刺杀
  RM_MOVEFAIL = 10010;
  RM_LONGHIT = 10011;//刺杀
  RM_WIDEHIT = 10012;//半月
  RM_PUSH = 10013;//被冲撞向后退
  RM_FIREHIT = 10014;//烈火
  RM_RUSH = 10015;//冲撞向前走
  RM_4FIREHIT = 10016;//4级烈火 20080112
  RM_WIDEHIT4 = 10017;//圆月弯刀
  RM_STRUCK = 10020;//受物理打击
  RM_DEATH = 10021;
  RM_DISAPPEAR = 10022;
  RM_MAGSTRUCK = 10025;
  RM_MAGHEALING = 10026;
  RM_STRUCK_MAG = 10027;//受魔法打击
  RM_MAGSTRUCK_MINE = 10028;
  RM_INSTANCEHEALGUAGE = 10029; //jacky
  RM_HEAR = 10030;//公聊
  RM_WHISPER = 10031;
  RM_CRY = 10032;
  RM_RIDE = 10033;
  RM_STRUCK1 = 10034;//富贵兽受攻击时的动作效果 20090518
  RM_WINEXP = 10044;
  RM_USERNAME = 10043;
  RM_LEVELUP = 10045;
  RM_CHANGENAMECOLOR = 10046;

  RM_LOGON = 10050;
  RM_ABILITY = 10051;
  RM_HEALTHSPELLCHANGED = 10052;
  RM_DAYCHANGING = 10053;
  RM_HEROHEALTHSPELLCHANGED = 10054;
  SM_HEROHEALTHSPELLCHANGED = 10055;

  RM_HEALTHSPELLCHANGED1 = 10056;
  SM_HEALTHSPELLCHANGED1 = 10057;
  RM_HEROHEALTHSPELLCHANGED1 = 10058;
  SM_HEROHEALTHSPELLCHANGED1 = 10059;

  RM_MOVEMESSAGE1 = 10097;//复仇标计倒计时
  SM_MOVEMESSAGE1 = 10098;//复仇标计倒计时
  RM_MOVEMESSAGE = 10099;//滚动公告    2007.11.13
  RM_SYSMESSAGE = 10100;
  RM_GROUPMESSAGE = 10102;
  RM_SYSMESSAGE2 = 10103;
  RM_GUILDMESSAGE = 10104;
  RM_SYSMESSAGE3 = 10105; //Jacky
  RM_ITEMSHOW = 10110;
  RM_ITEMHIDE = 10111;
  RM_DOOROPEN = 10112;
  RM_DOORCLOSE = 10113;
  RM_SENDUSEITEMS = 10114;//发送使用的物品
  RM_WEIGHTCHANGED = 10115;

  RM_FEATURECHANGED = 10116;
  RM_CLEAROBJECTS = 10117;
  RM_CHANGEMAP = 10118;
  RM_BUTCH = 10119;//挖
  RM_MAGICFIRE = 10120;
  RM_SENDMYMAGIC = 10122;//发送使用的魔法
  RM_MAGIC_LVEXP = 10123;
  RM_SKELETON = 10024;//显示尸体
  RM_DURACHANGE = 10125;//持久改变
  RM_MERCHANTSAY = 10126;
  RM_GOLDCHANGED = 10136;
  RM_CHANGELIGHT = 10137;
  RM_CHARSTATUSCHANGED = 10139;
  RM_DELAYMAGIC = 10154;
  RM_DELAYMAGIC1 = 10216;//延时群发魔法消息

  RM_DIGUP = 10200;
  RM_DIGDOWN = 10201;
  RM_FLYAXE = 10202;
  RM_LIGHTING = 10204;
  RM_SUBABILITY = 10302;
  RM_TRANSPARENT = 10308;

  RM_SPACEMOVE_SHOW = 10331;
  RM_RECONNECTION = 11332;
  RM_SPACEMOVE_SHOW2 = 10332; //?
  RM_HIDEEVENT = 10333;//隐藏烟花
  RM_SHOWEVENT = 10334;//显示烟花
  RM_SPACEMOVE_SHOW3 = 10335;//移动(无效果声音)
  SM_SPACEMOVE_SHOW3 = 10336;//移动(无效果声音)
  RM_ZEN_BEE = 10337;

  RM_OPENHEALTH = 10410;
  RM_CLOSEHEALTH = 10411;
  RM_DOOPENHEALTH = 10412;
  RM_CHANGEFACE = 10415;

  RM_ITEMUPDATE = 11000;
  RM_MONSTERSAY = 11001;
  RM_MAKESLAVE = 11002;

  RM_MONMOVE = 21004;
  {SS_200 = 200;//20101022 注释
  SS_201 = 201;
  SS_202 = 202;
  SS_WHISPER = 203;
  SS_204 = 204;
  SS_205 = 205;
  SS_206 = 206;
  SS_207 = 207;
  SS_208 = 208;
  SS_209 = 219;
  SS_210 = 210;
  SS_211 = 211;
  SS_212 = 212;
  SS_213 = 213;
  SS_214 = 214; }

  RM_10205 = 10205;
  RM_10101 = 10101;
  RM_ALIVE = 10153;//复活
  RM_CHANGEGUILDNAME = 10301;
  RM_10414 = 10414;
  RM_POISON = 10300;
  LA_UNDEAD = 1; //不死系

  RM_DELAYPUSHED = 10555;

  CM_QUERYUSERNAME = 80; //进入游戏,服务器返回角色名到客户端
  CM_QUERYBAGITEMS = 81;  //查询包裹物品
  CM_QUERYUSERSTATE = 82;//查看其它角色的装备

  CM_DROPITEM = 1000;//从包裹里扔出物品到地图,此时人物如果在安全区可能会提示安全区不允许扔东西
  CM_PICKUP = 1001;//捡东西
  CM_OPENDOOR = 1002;  //开门,人物走到地图的某个过门点时
  CM_TAKEONITEM = 1003;//装配装备到身上的装备位置
  CM_TAKEOFFITEM = 1004; //从身上某个装备位置取下某个装备
  CM_EAT = 1005; //使用物品,吃药
  CM_BUTCH = 1007;//挖
  CM_MAGICKEYCHANGE = 1008;//魔法快捷键改变
  CM_SOFTCLOSE = 1009;//退出传奇(游戏程序,是游戏中小退)
//与商店NPC交易相关
  CM_CLICKNPC = 1010; //用户点击了某个NPC进行交互
  CM_MERCHANTDLGSELECT = 1011; //商品选择,大类,输入框输入信息后返回
  CM_PLAYDICELabel = 2011;//修复不能玩色子
  CM_MERCHANTQUERYSELLPRICE = 1012;//物品放到出售框中，返回价格,标准价格,我们知道商店用户卖入的有些东西掉持久或有特殊
  CM_USERSELLITEM = 1013; //用户卖东西(点击“OK”后)
  CM_USERBUYITEM = 1014; //用户买入东西
  CM_USERGETDETAILITEM = 1015;//取得商品清单,比如点击"蛇眼戒指"大类,会出现一列蛇眼戒指供你选择
  CM_DROPGOLD = 1016; //用户放下金钱到地上
  //CM_1017 = 1017;//20090901 未使用
  CM_LOGINNOTICEOK = 1018; //健康游戏忠告点了确实,进入游戏
  CM_GROUPMODE = 1019;   //关组还是开组
  CM_CREATEGROUP = 1020; //新建组队
  CM_ADDGROUPMEMBER = 1021;//组内添人
  CM_DELGROUPMEMBER = 1022; //组内删人
  CM_USERREPAIRITEM = 1023; //用户修理东西
  CM_MERCHANTQUERYREPAIRCOST = 1024; //客户端向NPC取得修理费用
  CM_DEALTRY = 1025;  //开始交易,交易开始
  CM_DEALADDITEM = 1026; //加东东到交易物品栏上
  CM_DEALDELITEM = 1027;//从交易物品栏上撤回东东???好像不允许哦
  CM_DEALCANCEL = 1028;  //取消交易
  CM_DEALCHGGOLD = 1029; //本来交易栏上金钱为0,,如有金钱交易,交易双方都会有这个消息
  CM_DEALEND = 1030; //交易成功,完成交易
  CM_USERSTORAGEITEM = 1031; //用户寄存东西
  CM_USERTAKEBACKSTORAGEITEM = 1032;//用户向保管员取回东西
  CM_WANTMINIMAP = 1033;  //用户点击了"小地图"按钮
  CM_USERMAKEDRUGITEM = 1034; //用户制造毒药(其它物品)
  CM_OPENGUILDDLG = 1035; //用户点击了"行会"按钮
  CM_GUILDHOME = 1036; //点击"行会主页"
  CM_GUILDMEMBERLIST = 1037; //点击"成员列表"
  CM_GUILDADDMEMBER = 1038; //增加成员
  CM_GUILDDELMEMBER = 1039;//踢人出行会
  CM_GUILDUPDATENOTICE = 1040; //修改行会公告
  CM_GUILDUPDATERANKINFO = 1041; //更新联盟信息(取消或建立联盟)
  //CM_1042 = 1042;//20090901 未使用
  CM_ADJUST_BONUS = 1043;  //用户得到奖励??私服中比较明显,小号升级时会得出金钱声望等,不是很确定
  CM_GUILDALLY = 1044;//行会联盟
  CM_GUILDBREAKALLY = 1045;//取消行会联盟
  CM_HEROMAGICKEYCHANGE = 1046;//英雄魔法开关设置 20080606
//个人商店相关
  SM_ISSHOP = 1047;
  SM_PLAYSHOPLIST = 1048;//别人查看个人商店物品
  SM_PLAYSHOP_OK = 1049;//购买个人商店物品成功
  SM_PLAYSHOP_FALL = 1050;//购买个人商店物品失败
  SM_DELSHOPITEM = 1051;//删除个人商店物品
  RM_ISSHOP = 1052;
  CM_SELFSHOPITEMS = 1053;//开启个人商店
  CM_SELFCLOSESHOP = 1054;//收摊
  CM_CLICKSHOP = 1055;//别人查看个人商店物品
  CM_SELFSHOPBUY = 1056;//购买摆摊物品
  RM_SELFSHOPLIST = 1057;//人物登录发送个人商店列表数据
  SM_SELLSHOPLIST = 1058;//人物登录发送个人商店列表数据
  SM_SELLSHOPTITLE = 1059;
{$IF M2Version <> 2}
  CM_MERCHANTQUERYARMSEXCHANGEPRICE = 1060;//把装备放到交易框，取装备所得的卷轴碎片数 20100812
  RM_SENDARMSEXCHANGEPRICE = 1061;//发送装备所得的卷轴碎片数
  SM_SENDARMSEXCHANGEPRICE = 1062;//发送装备所得的卷轴碎片数
  CM_USERARMSEXCHANGE = 1063;//客户端兑换卷轴碎片
  RM_USERARMSEXCHANGE_FAIL = 1064;//客户端兑换卷轴碎片 失败
  SM_USERARMSEXCHANGE_FAIL = 1065;//客户端兑换卷轴碎片 失败
  RM_USERARMSEXCHANGE_OK = 1066;//客户端兑换卷轴碎片 成功
  SM_USERARMSEXCHANGE_OK = 1067;//客户端兑换卷轴碎片 成功
  CM_USERKAMPO = 1068;//客户端鉴定物品
  RM_USERKAMPO_FAIL = 1069;//客户端鉴定物品 失败
  SM_USERKAMPO_FAIL = 1070;//客户端鉴定物品 失败
  RM_USERKAMPO_OK = 1071;//客户端鉴定物品 成功
  SM_USERKAMPO_OK = 1072;//客户端鉴定物品 成功
  //新鉴定
  CM_NewUSERKAMPO = 1168;//客户端鉴定物品
  RM_NewUSERKAMPO_FAIL = 1169;//客户端鉴定物品 失败
  SM_NewUSERKAMPO_FAIL = 1170;//客户端鉴定物品 失败
  RM_NewUSERKAMPO_OK = 1171;//客户端鉴定物品 成功
  SM_NewUSERKAMPO_OK = 1172;//客户端鉴定物品 成功



  CM_USERCHANGEKAMPO = 1073;//客户端更换物品
  RM_USERCHANGEKAMPO_FAIL = 1074;//客户端更换物品 失败
  SM_USERCHANGEKAMPO_FAIL = 1075;//客户端更换物品 失败
  RM_USERCHANGEKAMPO_OK = 1076;//客户端更换物品 成功
  SM_USERCHANGEKAMPO_OK = 1077;//客户端更换物品 成功
  SM_UPDATEKAMPOITME = 1078;//更新鉴定物品格物品数据
  CM_OPENQUERYPROFICIENCY = 1079;//查询神秘解读的熟练度
  SM_OPENQUERYPROFICIENCY = 1080;//查询神秘解读的熟练度
  CM_OPENSCROLLFRM = 1081;//打开卷轴窗口，取精力值和幸运值
  SM_OPENSCROLLFRM = 1082;//打开卷轴窗口，取精力值和幸运值
  CM_USERMAKESCROLL = 1083;//客户端使用羊皮卷制造神秘卷轴
  RM_USERMAKESCROLL_OK = 1084;
  SM_USERMAKESCROLL_OK = 1085;
  RM_USERMAKESCROLL_FAIL = 1086;
  SM_USERMAKESCROLL_FAIL = 1087;
  CM_USERSCROLLCHANGEITME = 1088;//客户端使用神秘卷轴解读神秘属性
  RM_USERSCROLLCHANGEITME_OK = 1089;
  SM_USERSCROLLCHANGEITME_OK = 1090;
  RM_USERSCROLLCHANGEITME_FAIL = 1091;
  SM_USERSCROLLCHANGEITME_FAIL = 1092;
  RM_SENDUSESPIRITITEMS = 1093;//发送灵媒装备位物品数据
  SM_SENDUSESPIRITITEMS = 1094;
  CM_TAKEONSPIRITITEM = 1095;//把灵媒放到灵媒位上
  SM_TAKEONSPIRITITEM_OK = 1096;
  SM_TAKEONSPIRITITEM_FAIL = 1097;
  CM_TAKEOFFSPIRITITEM = 1098;//从灵媒位脱下物品
  SM_TAKEOFFSPIRITITEM_OK = 1099;
  SM_TAKEOFFSPIRITITEM_FAIL = 1107;
  RM_OPENDJUDGE = 1108;//打开品评窗口
  SM_OPENDJUDGE = 1109;
  CM_USERJUDGE = 1110;//客户端品评
  SM_USERJUDGE_OK = 1111;//品评成功
  SM_USERJUDGE_FAIL = 1112;//品评失败
  CM_USERFINDJEWEL = 1113;//使用灵媒搜索宝物
  SM_USERFINDJEWEL_OK = 1114;//使用灵媒搜索宝物成功
  SM_USERFINDJEWEL_FAIL = 1115;//使用灵媒搜索宝物失败
  CM_USERDIGJEWELITME = 1116;//客户端挖宝
{$IFEND}
  SM_OPENHEALTH = 1100;
  SM_CLOSEHEALTH = 1101;
  SM_BREAKWEAPON = 1102; //武器破碎
  SM_INSTANCEHEALGUAGE = 1103; //实时治愈
  SM_CHANGEFACE = 1104; //变脸,发型改变?
  CM_PASSWORD = 1105;
  //SM_VERSION_FAIL = 1106; //客户端版本验证失败

  CM_THROW = 3005;//抛符(客户端使用)

//动作命令1
  CM_HORSERUN = 3009;//马跑
  CM_TURN = 3010; //转身(方向改变)
  CM_WALK = 3011; //走
  CM_SITDOWN = 3012;//挖(蹲下)
  CM_RUN = 3013; //跑
  CM_HIT = 3014;   //普通物理近身攻击
  CM_HEAVYHIT = 3015;//跳起来打的动作
  CM_BIGHIT = 3016;
  CM_SPELL = 3017; //施魔法
  CM_POWERHIT = 3018; //攻杀
  CM_LONGHIT = 3019;  //刺杀
  CM_LONGHIT4 = 3020;//四级刺杀
  CM_WIDEHIT4 = 3021;//圆月弯刀(四级半月)
  CM_WIDEHIT = 3024; //半月
  CM_FIREHIT = 3025; //烈火攻击
  CM_SAY = 3030;    //角色发言
  CM_4FIREHIT = 3031; //4级烈火攻击
  CM_CRSHIT = 3036; //抱月刀
  CM_TWNHIT = 3037; //开天斩重击
  CM_QTWINHIT = 3041; //开天斩轻击
  CM_CIDHIT = 3040; //龙影剑法
  CM_TWINHIT = CM_TWNHIT;
  CM_PHHIT = 3038; //破魂斩
  CM_DAILY = 3042; //逐日剑法 20080511
  CM_BATTERHIT1 = 3043;//追心刺 20090625
  CM_BATTERHIT2 = 3044;//三绝杀 20090703
  CM_BATTERHIT3 = 3045;//横扫千军 20090703
  CM_BATTERHIT4 = 3046;//断岳斩
  CM_BLOODSOUL = 3048;//血魄一击(战)
  CM_3037 = 3039;//2007.10.15改了值  以前是  3037(客户端使用)
  CM_HIT_107 = 3049;//纵横剑术
  RM_HIT_107 = 3050;//纵横剑术
  SM_HIT_107 = 3051;//纵横剑术
  RM_41 = 41;
  //RM_42 = 42;
  //RM_43 = 43;
  RM_44 = 56;

  RM_DONATE_FAIL = 10306;
  RM_MENU_OK = 10309; //菜单

  RM_MAGICFIREFAIL = 10121;
  RM_MERCHANTDLGCLOSE = 10127;
  RM_SENDGOODSLIST = 10128;//发送商品名单
  RM_SENDUSERSELL = 10129;//发送用户出售
  RM_SENDBUYPRICE = 10130;//发送购买价格
  RM_USERSELLITEM_OK = 10131;//用户出售成功
  RM_USERSELLITEM_FAIL = 10132;//用户出售失败
  RM_BUYITEM_SUCCESS = 10133;//购买项目成功
  RM_BUYITEM_FAIL = 10134;//购买项目失败
  RM_SENDDETAILGOODSLIST = 10135; //发送详细的商品名单
  RM_LAMPCHANGEDURA = 10138;
  RM_SENDUSERREPAIR = 11139;//发送用户修理
  RM_GROUPCANCEL = 10140;
  RM_SENDUSERSREPAIR = 10141;//发送用户修理
  RM_SENDREPAIRCOST = 10142;//发送修理成本
  RM_USERREPAIRITEM_OK = 10143;//用户修理项目成功
  RM_USERREPAIRITEM_FAIL = 10144;//用户修理项目失败
  //10145
  RM_USERSTORAGEITEM = 10146;//用户仓库项目
  RM_USERGETBACKITEM = 10147;//用户获得回的仓库项目
  RM_SENDDELITEMLIST = 10148;//发送删除项目的名单
  RM_USERMAKEDRUGITEMLIST = 10149;//用户做药品项目的名单
  RM_MAKEDRUG_SUCCESS = 10150;//做药成功
  RM_MAKEDRUG_FAIL = 10151;//做药失败

  RM_SENDUSERARMSTEAR = 10152;//武器拆卸赤炎石 20100708
  RM_10155 = 10155;
  SM_SENDUSERARMSTEAR = 10156;//武器拆卸赤炎石 20100708
  CM_USERARMSTEARITEM = 10157; //客户端发来所要拆分的物品信息 20100708
  RM_USERARMSTEAR_OK = 10158;//拆分物品成功 20100708
  SM_USERARMSTEAR_OK = 10159;
  RM_USERARMSTEAR_FAIL = 10160;//拆分物品失败 20100708
  SM_USERARMSTEAR_FAIL = 10161;
  RM_ARMSCRIT = 10162;//暴击飘血效果 20100710
  SM_ARMSCRIT = 10163;//暴击飘血效果 20100710

  RM_SENDUSERARMSEXCHANGE = 10164;//武器兑换卷轴碎片 20100809
  SM_SENDUSERARMSEXCHANGE = 10165;//武器兑换卷轴碎片 20100809

  CM_AUTOGAMEGIRDUPSKILL99 = 10166; //自动修炼技能强身术，参数1＝使用1800张灵符修炼180次，每次10张
                                                            {2＝使用3600张灵符修炼360次，每次10张
                                                             3＝使用5400张灵符修炼180次，每次30张
                                                             4＝使用10800张灵符修炼360次，每次30张}
  CM_CLOSEGAMEGIRDUPSKILL99 = 10167; //取消自动修炼
  CM_QUERYGAMEGIRDUPSKILL99 = 10168; //查询剩余修炼次数

  CM_SKILLTOJINGQING = 10169;//修炼奇经
  RM_SKILLTOJINGQING_FAIL = 10170;//修炼奇经失败
  SM_SKILLTOJINGQING_FAIL = 10171;
  RM_SKILLTOJINGQING_OK = 10172;//修炼奇经成功
  SM_SKILLTOJINGQING_OK = 10173;

  CM_AUTOGAMEGIRDUPSKILL95 = 10174;//自动修炼斗转星移 参数1＝1800张灵符60次 2=3600张灵符120次 参数2=0主体修炼 1=英雄修炼
  CM_CLOSEGAMEGIRDUPSKILL95 = 10175; //取消自动修炼
  CM_QUERYGAMEGIRDUPSKILL95 = 10176; //查询剩余修炼次数
  RM_OPENLIANQI = 10177; //打开炼气窗口
  SM_OPENLIANQI = 10178; //打开炼气窗口
  CM_LIANQIPRACTICE = 10179;//炼气窗口,点击修炼
  RM_LIANQIPRACTICE = 10180;
  SM_LIANQIPRACTICE = 10181;
  RM_SENDJINGYUANVALUE = 10182;//更新精元值数据
  SM_SENDJINGYUANVALUE = 10183;
  CM_CLENTGETLIANQIPRACTICE = 10184;//提取炼气物品

  SM_POWERHITEX1 = 9984;//强化攻杀剑术1
  SM_POWERHITEX2 = 9985;//强化攻杀剑术2
  SM_POWERHITEX3 = 9986;//强化攻杀剑术3
  SM_WIDEHIT4EX1 = 9987;//强化圆月弯刀1
  SM_WIDEHIT4EX2 = 9989;//强化圆月弯刀2
  SM_WIDEHIT4EX3 = 9990;//强化圆月弯刀3
  SM_LONGHITEX1 = 9991;//强化刺杀1(客户端使用)
  SM_LONGHITEX2 = 9992;//强化刺杀2(客户端使用)
  SM_LONGHITEX3 = 9993;//强化刺杀3(客户端使用)
  SM_FIREHITEX1 = 9994;//强化烈火1(客户端使用)
  SM_FIREHITEX2 = 9995;//强化烈火2(客户端使用)
  SM_FIREHITEX3 = 9996;//强化烈火3(客户端使用)
  SM_DAILYEX1 = 9997;//强化逐日1(客户端使用)
  SM_DAILYEX2 = 9998;//强化逐日2(客户端使用)
  SM_DAILYEX3 = 9999;//强化逐日3(客户端使用)
  RM_MAGIC_UPLVEXPEXP = 10049;//强化技能升级
  {$IF M2Version <> 2}
  SM_SENDHUMTITLES = 10185;//发送称号数据
  CM_SETUSERTITLES = 10186;//客户端设置称号
  RM_SETUSERTITLES = 10187;//设置称号成功
  SM_SETUSERTITLES = 10188;
  RM_SENDHUMTITLES = 10189;//发送称号数据
  CM_SETSHOWFENGHAO = 10190;//内挂设置隐藏称号
  CM_LONGHITFORFENGHAO = 10191;//刺杀粉红效果
  SM_LONGHITFORFENGHAO = 10192;//刺杀粉红效果(客户端使用)
  CM_FIREHITFORFENGHAO = 10193;//烈火粉红效果
  SM_FIREHITFORFENGHAO = 10194;//烈火粉红效果(客户端使用)
  CM_DAILYFORFENGHAO = 10195;//逐日粉红效果
  SM_DAILYFORFENGHAO = 10196;//逐日粉红效果(客户端使用)
  SM_SENDFENGHAOLIST = 10197;//发送护花使者或龙卫列表
  CM_CALLFENGHAO = 10198;//召唤传送称号人员(传奇之星操作令牌)
  CM_RECYCFENGHAO = 10199;//回收称号
  CM_AGREECALLFENGHAO = 10203;//同意召唤传送(护花使者或龙卫)
  CM_CANCELCALLFENGHAO = 10206;//取消召唤传送
  SM_SENDDOMINATLIST = 10207;//发送世界地图地图名列表
  CM_WORLDFLY = 10208;//点击世界地图传送(主宰令)
  RM_WORLDFLY = 10209;
  SM_WORLDFLY = 10210;
  CM_CLOSEDOMINATETOKEN = 10211;//关闭主宰令
  CM_FENGHAOAGREE = 10212;//任命称号确认 20110313


  SM_MAGIC_UPLVEXPEXP = 10060;
  RM_SENDHEARTINFO = 10061;
  RM_SHOWHEARTEFF = 10062;//显示龙卫状态效果
  SM_SENDHEARTINFO = 10063;//发送心法页相关数据
  CM_CHANGESAVVYHEARTSKILL = 10064;//改变龙卫心法类型
  SM_UPDIVISIONPONT = 10065;//更新门派人气值
  CM_DIVISIONGETFENGHAO = 10066;//门派老大点击"称号领取"
  CM_SAVVYHEARTSKILL = 10067;//领悟龙卫心法
  CM_INCHEATRPOINT = 10068;//点击Exp按键，执行QF脚本段(999心法吸收功能)
  CM_DIVISIONAPPLYLIST = 10069;//取申请入门列表
  SM_SENDDIVISIONAPPLYLIST = 10070;//发送申请入门列表
  CM_DIVISIONMEMBERLIST = 10071;//取门派成员数据
  SM_SENDDIVISIONMEMBERLIST = 10072;//发送门派成员数据
  CM_DIVISIONHOME = 10073;//打开门派首页
  CM_OPENDIVISIONDLG = 10074;//打开门派对话框
  SM_OPENDIVISIONDLG = 10075;//打开门派对话框成功
  SM_OPENDIVISIONDLG_FAIL = 10076;//打开门派对话框失败
  CM_DIVISIONUPDATENOTICE = 10077;//修改门派公告
  CM_DIVISIONDDELMEMBER = 10078;//删除门派成员
  SM_DIVISIONDDELMEMBER_OK = 10079;//门派老大删除弟子成功
  SM_DIVISIONDDELMEMBER_OK1 = 10080;//自已退出门派成功
  SM_DIVISIONDELMEMBER_FAIL = 10081;//门派删除弟子成功
  CM_AGREEAPPLYDIVISION = 10082;//门派老大同意入门申请
  CM_CANCELAPPLYDIVISION = 10083;//门派老大取消入门申请
  RM_OPENSAVVYHEART = 10084;//打开领悟心法窗口
  SM_OPENSAVVYHEART = 10085;//打开领悟心法窗口
  CM_APPLYDIVISION = 10086;//申请(取消)入门派
  CM_NAMEQUERYDIVISIONLIST = 10087;//申请入门派窗口按宗师名查询
  CM_QUERYDIVISIONLIST = 10088;//申请入门派窗口翻页
  RM_QUERYDIVISIONLIST = 10089;//打开申请入门派窗口
  SM_QUERYDIVISIONLIST = 10090;
  RM_BUILDDIVISION_OK = 10091;//创建师门成功
  SM_BUILDDIVISION_OK = 10092;
  RM_BUILDDIVISION_FAIL = 10093;//创建师门失败
  SM_BUILDDIVISION_FAIL = 10094;
  {$IFEND}
  RM_DIVISIONMESSAGE = 10095;//师门聊天
  SM_DIVISIONMESSAGE = 10096;
    
  CM_OPENUPSKILL95 = 10213;//打通斗转99级
  RM_OPENUPSKILL95_FAIL = 10214;//打通斗转99级失败
  SM_OPENUPSKILL95_FAIL = 10215;//打通斗转99级失败
  RM_BUILDGUILD_OK = 10303;
  RM_BUILDGUILD_FAIL = 10304;
  RM_DONATE_OK = 10305;
  
  RM_SPACEMOVE_FIRE2 = 11330;//空间移动
  RM_SPACEMOVE_FIRE = 11331;//空间移动

  RM_ADJUST_BONUS = 10400;
  RM_10401 = 10401;
  RM_BREAKWEAPON = 10413;
  RM_PASSWORD = 10416;
  RM_PLAYDICE = 10500;//转骰子
  RM_PASSWORDSTATUS = 10601;
  RM_GAMEGOLDCHANGED = 10666;
  RM_MYSTATUS = 10777;

  RM_HORSERUN = 11000;
  RM_CRSHIT = 11014;
  RM_RUSHKUNG = 11015;

  STATE_OPENHEATH = 1;
  POISON_68 = 68;
  //CM_QUERYUSERSET = 49999;//未使用 20090226 注释

  SM_40 = 35;
  SM_41 = 36;
  SM_42 = 37;
  SM_43 = 38;
  SM_44 = 39; //龙影剑法

  SM_HORSERUN = 5;
  SM_716 = 716;

  SM_PASSWORD = 3030;
  SM_PLAYDICE = 1200;//转骰子

  SM_GAMEGOLDNAME = 55; //向客户端发送游戏币,游戏点,金刚石,灵符数量
  SM_GAMEGOLDNAME1 = 56;//向客户端发送金刚石,灵符数量 20090524

  SM_PASSWORDSTATUS = 20001;
  SM_SERVERCONFIG = 20002;
  SM_GETREGINFO = 20003;

  ET_DIGOUTZOMBI = 1;
  ET_VORTEX = 2;//旋涡
  ET_PILESTONES = 3;
  ET_HOLYCURTAIN = 4;//困魔咒效果
  ET_FIRE = 5;//火墙(普通)
  ET_SCULPEICE = 6;//祖玛教主破壳而出后，地上的场景
{6种烟花}
  ET_FIREFLOWER_1 = 7;//一心一意
  ET_FIREFLOWER_2 = 8;//心心相印
  ET_FIREFLOWER_3 = 9;
  ET_FIREFLOWER_4 = 10;
  ET_FIREFLOWER_5 = 11;
  ET_FIREFLOWER_6 = 12;
  ET_FIREFLOWER_7 = 13;
  ET_FIREFLOWER_8 = 14;//没有图片
  ET_FOUNTAIN = 15;//喷泉效果 20080624
  ET_DIEEVENT = 16; //人型庄主死亡动画效果 20080918
  ET_FIREDRAGON = 17;//守护兽小火圈效果 20090123
  ET_SCULPEICE_1 = 18;//雪域卫士破冰而出后，地上的场景
  ET_FIRE_FENGHAO = 19;//粉红火墙(称号)
  ET_FIRE_1 = 20;//强化火墙1
  ET_FIRE_2 = 21;//强化火墙2
  ET_FIRE_3 = 22;//强化火墙3
  ET_NOTGOTO = 23;//不能穿过(天雷乱舞)
  //SM_NEEDPASSWORD = 8003;//未使用 20100925 注释
  //CM_POWERBLOCK = 0;//未使用 20091022 注释

  //商铺相关
  CM_OPENSHOP = 9000; //打开商铺
  SM_SENGSHOPITEMS = 9001; // SERIES 7 每页的数量    wParam 总页数
  CM_BUYSHOPITEM = 9002;
  SM_BUYSHOPITEM_SUCCESS = 9003;
  SM_BUYSHOPITEM_FAIL = 9004;
  SM_SENGSHOPSPECIALLYITEMS = 9005; //奇珍类型
  CM_BUYSHOPITEMGIVE = 9006; //赠送
  SM_BUYSHOPITEMGIVE_FAIL = 9007;
  SM_BUYSHOPITEMGIVE_SUCCESS = 9008;

  RM_OPENSHOPSpecially = 30000;
  RM_OPENSHOP = 30001;
  RM_BUYSHOPITEM_FAIL = 30003;//商铺购买物品失败
  RM_BUYSHOPITEMGIVE_FAIL = 30004;
  RM_BUYSHOPITEMGIVE_SUCCESS = 30005;
  //==============================================================================
  CM_QUERYUSERLEVELSORT = 3500; //用户等级排行
  RM_QUERYUSERLEVELSORT = 35000;
  SM_QUERYUSERLEVELSORT = 2500;
  //==============================新增物品寄售系统(拍卖)==========================
  RM_SENDSELLOFFGOODSLIST = 21008;//拍卖
  SM_SENDSELLOFFGOODSLIST = 20008;//拍卖
  RM_SENDUSERSELLOFFITEM = 21005; //寄售物品
  SM_SENDUSERSELLOFFITEM = 20005; //寄售物品
  RM_SENDSELLOFFITEMLIST = 22009; //查询得到的寄售物品
  CM_SENDSELLOFFITEMLIST = 20009; //查询得到的寄售物品
  RM_SENDBUYSELLOFFITEM_OK = 21010; //购买寄售物品成功
  SM_SENDBUYSELLOFFITEM_OK = 20010; //购买寄售物品成功
  RM_SENDBUYSELLOFFITEM_FAIL = 21011; //购买寄售物品失败
  SM_SENDBUYSELLOFFITEM_FAIL = 20011; //购买寄售物品失败
  RM_SENDBUYSELLOFFITEM = 41005; //购买选择寄售物品
  CM_SENDBUYSELLOFFITEM = 4005; //购买选择寄售物品
  RM_SENDQUERYSELLOFFITEM = 41006; //查询选择寄售物品
  CM_SENDQUERYSELLOFFITEM = 4006; //查询选择寄售物品
  RM_SENDSELLOFFITEM = 41004; //接受寄售物品
  CM_SENDSELLOFFITEM = 4004; //接受寄售物品
  RM_SENDUSERSELLOFFITEM_FAIL = 2007; //R = -3  寄售物品失败
  RM_SENDUSERSELLOFFITEM_OK = 2006; //寄售物品成功
  SM_SENDUSERSELLOFFITEM_FAIL = 20007; //R = -3  寄售物品失败
  SM_SENDUSERSELLOFFITEM_OK = 20006; //寄售物品成功
//==============================元宝寄售系统(20080316)==========================
  RM_SENDDEALOFFFORM = 23000;//打开出售物品窗口
  SM_SENDDEALOFFFORM = 23001;//打开出售物品窗口
  //打开新鉴定窗口
  RM_OpenKampoDlgNew = 27000;//打开出售物品窗口
  SM_OpenKampoDlgNew = 27001;//打开出售物品窗口

  CM_SELLOFFADDITEM  = 23002;//客户端往出售物品窗口里加物品
  SM_SELLOFFADDITEM_OK = 23003;//客户端往出售物品窗口里加物品 成功
  RM_SELLOFFADDITEM_OK = 23004;
  SM_SellOffADDITEM_FAIL=23005;//客户端往出售物品窗口里加物品 失败
  RM_SellOffADDITEM_FAIL=23006;
  CM_SELLOFFDELITEM = 23007;//客户端删除出售物品窗里的物品
  SM_SELLOFFDELITEM_OK = 23008;//客户端删除出售物品窗里的物品 成功
  RM_SELLOFFDELITEM_OK = 23009;
  SM_SELLOFFDELITEM_FAIL = 23010;//客户端删除出售物品窗里的物品 失败
  RM_SELLOFFDELITEM_FAIL = 23011;
  CM_SELLOFFCANCEL = 23012;//客户端取消元宝寄售
  RM_SELLOFFCANCEL = 23013; // 元宝寄售取消出售
  SM_SellOffCANCEL = 23014;//元宝寄售取消出售
  CM_SELLOFFEND    = 23015; //客户端元宝寄售结束
  SM_SELLOFFEND_OK = 23016; //客户端元宝寄售结束 成功
  RM_SELLOFFEND_OK = 23017;
  SM_SELLOFFEND_FAIL= 23018; //客户端元宝寄售结束 失败
  RM_SELLOFFEND_FAIL= 23019;
  RM_QUERYYBSELL = 23020;//查询正在出售的物品
  SM_QUERYYBSELL = 23021;//查询正在出售的物品
  RM_QUERYYBDEAL = 23022;//查询可以的购买物品
  SM_QUERYYBDEAL = 23023;//查询可以的购买物品
  CM_CANCELSELLOFFITEMING = 23024; //取消正在寄售的物品 20080318(出售人)
  CM_SELLOFFBUYCANCEL = 23025; //取消寄售 物品购买 20080318(购买人)
  CM_SELLOFFBUY = 23026; //确定购买寄售物品 20080318
  SM_SELLOFFBUY_OK =23027;//购买成功
  RM_SELLOFFBUY_OK =23028;
//===========================英雄=============================================
  CM_RECALLHERO = 5000; //召唤英雄
  SM_RECALLHERO = 5001;
  CM_HEROLOGOUT = 5002; //英雄退出
  SM_HEROLOGOUT = 5003;
  SM_CREATEHERO = 5004; //创建英雄

  SM_HERODEATH = 5005;  //创建死亡
  CM_HEROCHGSTATUS = 5006; //改变英雄状态
  CM_HEROATTACKTARGET = 5007; //英雄锁定目标
  CM_HEROPROTECT = 5008; //守护目标
  CM_HEROTAKEONITEM = 5009;  //打开物品栏
  CM_HEROTAKEOFFITEM = 5010; //关闭物品栏
  //CM_TAKEOFFITEMHEROBAG = 5011; //装备脱下到英雄包裹 20110920 注释
  //CM_TAKEOFFITEMTOMASTERBAG = 5012; //装备脱下到主人包裹  20110920 注释
  CM_SENDITEMTOMASTERBAG = 5013; //英雄包裹到主人包裹
  CM_SENDITEMTOHEROBAG = 5014; //主人包裹到英雄包裹
  SM_HEROTAKEON_OK = 5015;
  SM_HEROTAKEON_FAIL = 5016;
  SM_HEROTAKEOFF_OK = 5017;
  SM_HEROTAKEOFF_FAIL = 5018;
  //SM_TAKEOFFTOHEROBAG_OK = 5019;  20110920 注释
  //SM_TAKEOFFTOHEROBAG_FAIL = 5020; 20110920 注释
  //SM_TAKEOFFTOMASTERBAG_OK = 5021; 20110920 注释
  //SM_TAKEOFFTOMASTERBAG_FAIL = 5022;20110920 注释
  CM_HEROTAKEONITEMFORMMASTERBAG = 5023; //从主人包裹穿装备到英雄包裹
  CM_TAKEONITEMFORMHEROBAG = 5024; //从英雄包裹穿装备到主人包裹
  SM_SENDITEMTOMASTERBAG_OK = 5025; //主人包裹到英雄包裹成功
  SM_SENDITEMTOMASTERBAG_FAIL = 5026; //主人包裹到英雄包裹失败
  SM_SENDITEMTOHEROBAG_OK = 5027; //英雄包裹到主人包裹
  SM_SENDITEMTOHEROBAG_FAIL = 5028; //英雄包裹到主人包裹
  CM_QUERYHEROBAGCOUNT = 5029; //查看英雄包裹容量
  SM_QUERYHEROBAGCOUNT = 5030; //查看英雄包裹容量
  CM_QUERYHEROBAGITEMS = 5031; //查看英雄包裹
  SM_SENDHEROUSEITEMS = 5032;  //发送英雄身上装备
  SM_HEROBAGITEMS = 5033;     //接收英雄物品
  SM_HEROADDITEM = 5034;  //英雄包裹添加物品
  SM_HERODELITEM = 5035;  //英雄包裹删除物品
  SM_HEROUPDATEITEM = 5036; //英雄包裹更新物品
  SM_HEROADDMAGIC = 5037;   //添加英雄魔法
  SM_HEROSENDMYMAGIC = 5038; //发送英雄的魔法
  SM_HERODELMAGIC = 5039;   //删除英雄魔法
  SM_HEROABILITY = 5040;   //英雄属性1
  SM_HEROSUBABILITY = 5041;//英雄属性2
  SM_HEROWEIGHTCHANGED = 5042;
  CM_HEROEAT = 5043;       //吃东西
  SM_HEROEAT_OK = 5044;    //吃东西成功
  SM_HEROEAT_FAIL = 5045; //吃东西失败
  SM_HEROMAGIC_LVEXP = 5046;//魔法等级
  SM_HERODURACHANGE = 5047;  //英雄持久改变
  SM_HEROWINEXP = 5048;    //英雄增加经验
  SM_HEROLEVELUP = 5049;  //英雄升级
  //SM_HEROCHANGEITEM = 5050; //英雄自动更新物品(好象没用上) 20110912 注释
  SM_HERODELITEMS = 5051;   //删除英雄物品
  CM_HERODROPITEM = 5052;   //英雄往地上扔物品
  SM_HERODROPITEM_SUCCESS = 5053;//英雄扔物品成功
  SM_HERODROPITEM_FAIL = 5054;  //英雄扔物品失败
  CM_HEROGOTETHERUSESPELL = 5055; //使用合击
  SM_GOTETHERUSESPELL = 5056; //使用合击
  SM_FIRDRAGONPOINT = 5057;   //英雄怒气值
  CM_REPAIRFIRDRAGON = 5058;  //修补火龙之心
  SM_REPAIRFIRDRAGON_OK = 5059; //修补火龙之心成功
  SM_REPAIRFIRDRAGON_FAIL = 5060; //修补火龙之心失败
  CM_ASSESSMENTHERO = 1006;//评定英雄
  SM_ASSESSMENTHERO_OK = 3032;//英雄评定成功
  SM_ASSESSMENTHERO_FAIL = 3033;//英雄评定失败
  CM_CHOOSEHEROJOB = 3026;//设置所选副将职业(面板上选择哪个职业英雄出战)
  CM_HEROAUTOPRACTICE = 3027;//英雄自我修炼
  SM_HEROAUTOPRACTICE_OK = 3028;//英雄自我修炼成功
  SM_OPENHEROAUTOPRA = 3029;//打开英雄自我修炼窗口
  RM_GOLDGAMEGIRDCHANGED = 3034;//更新客户端金币及灵符
  SM_GOLDGAMEGIRDCHANGED = 3035;//更新客户端金币及灵符
  CM_SHOWHEROLEVEL = 3047;//副将英雄等级受限提示开启
//------------------祝福罐.魔令包功能---------------------------
  CM_DBLREPAIRDRAGON = 4999;//双击装备位置的祝福罐,自动把包裹里的祝福油填充完毕) 20100928
  CM_REPAIRDRAGON = 5061;  //祝福罐.魔令包功能
  SM_REPAIRDRAGON_OK = 5062; //修补祝福罐.魔令包成功
  SM_REPAIRDRAGON_FAIL = 5063; //修补祝福罐.魔令包失败
//----------------------------------------------------
  SM_OPENBOXS = 5064;//打开宝箱 20080115
  SM_ASSESSMENTHEROINFO = 5065; //发送评定英雄数据
  RM_OPENHEROAUTOPRA = 5066;//打开英雄自我修炼窗口

  CM_REPAIRDRAGONINDIA = 5067;  //修补天龙印
  SM_REPAIRDRAGONINDIA_OK = 5068; //修补天龙印成功
  SM_REPAIRDRAGONINDIA_FAIL = 5069; //修补天龙印失败

  {$IF M2Version <> 2}
  RM_NGMAGIC_LVEXP = 5070;//怒之内功技能强化成功 20110604
  SM_NGMAGIC_LVEXP = 5071;
  RM_HERONGMAGIC_LVEXP = 5072;//怒之内功技能强化成功 20110605
  SM_HERONGMAGIC_LVEXP = 5073;
  CM_NGMAGICLVEXP = 5074;//客户端点击内功技能面板上的“升级”
  {$IFEND}
  RM_PETSMONHAPPLOG = 5075;//打开宠物喂养日志
  SM_PETSMONHAPPLOG = 5076;//打开宠物喂养日志
  CM_PETSMONHAPPLOG = 5078;//喂养日志翻页
  CM_MOVETOPETSMON = 5079;//传送到宠物身旁
  SM_MOVETOPETSMON = 5080;//传送成功
  RM_UPPETSMONHAPP = 5081;//更新宠物的快乐度
  SM_UPPETSMONHAPP = 5082;

  CM_CHECK9YEARSBOXSKEY = 19985;//点击“开始选择”，先判断是否有钥匙，没钥匙，则提示购买
  RM_GET9YEARSBOXSITEM_OK = 19986; //九周年宝箱取物品成功
  SM_GET9YEARSBOXSITEM_OK = 19987; //九周年宝箱取物品成功
  RM_SEND9YEARSITEMID = 19988;//发送选择的物品制造ID
  SM_SEND9YEARSITEMID = 19989;//发送选择的物品制造ID
  CM_OPENNEW9YEARSBOXS = 19990;//开启新天赐
  CM_GETFREE9YEARSBOXSITEM = 19991;//取20格免费奖励宝箱物品
  CM_OPENFREE9YEARSBOXS = 19992;//打开免费奖励宝箱
  CM_GET9YEARSBOXSITEM = 19993;//取9周年宝箱物品
  CM_UPDATA9YEARSBOXSITEM = 19994;//更换箱子物品
  CM_OPEN9YEARSBOXS = 19995;//打开9周年宝箱
  CM_BUY9YEARSBOXSKEY = 19996; //购买9周年宝箱的钥匙

  RM_BLOODSOUL = 19997;//血魄一击(战)
  SM_BLOODSOUL = 19998;//血魄一击(战)
  RM_RECALLHERO = 19999;//召唤英雄
  RM_HEROWEIGHTCHANGED = 20000;
  RM_SENDHEROUSEITEMS = 20001;
  RM_SENDHEROMYMAGIC = 20002;
  RM_HEROMAGIC_LVEXP = 20003;
  RM_QUERYHEROBAGCOUNT = 20004;
  RM_HEROABILITY = 20005;
  RM_HERODURACHANGE = 20006;
  RM_HERODEATH = 20007;
  RM_HEROLEVELUP = 20008;
  RM_HEROWINEXP = 20009;
  RM_ASSESSMENTHEROINFO = 20010;//发送评定英雄数据
  RM_CREATEHERO = 20011;
  RM_MAKEGHOSTHERO = 20012;
  RM_HEROSUBABILITY = 20013;

  RM_GOTETHERUSESPELL = 20014; //使用合击
  RM_FIRDRAGONPOINT = 20015;  //发送英雄怒气值
  //-----------------------------------月灵重击
  RM_FAIRYATTACKRATE = 20017;
  SM_FAIRYATTACKRATE = 20018;
  //-----------------------------------
  SM_SERVERUNBIND = 20019;
  RM_DESTROYHERO = 20020;//英雄销毁
  SM_DESTROYHERO = 20021;//英雄销毁

  ET_PROTECTION_STRUCK = 20022; //护体受攻击  20080108
  ET_PROTECTION_PIP = 20023;  //护体被破
  
  SM_MYSHOW = 20024; //显示自身动画
  RM_MYSHOW = 20025; //

  RM_OPENBOXS = 20026;//打开宝箱 20080115
  CM_OPENBOXS = 20027;//打开宝箱 20080115 加
  CM_MOVEBOXS = 20028;//转动宝箱 20080117
  RM_MOVEBOXS = 20029;//转动宝箱 20080117
  SM_MOVEBOXS = 20030;//转动宝箱 20080117
  CM_GETBOXS  = 20031;//客户端取得宝箱物品 20080118
  SM_GETBOXS  = 20032;
  RM_GETBOXS  = 20033;
  SM_OPENBOOKS  = 20034; //打开卧龙NPC 20080119
  RM_OPENBOOKS  = 20035;
  RM_DRAGONPOINT = 20036;  //发送黄条气值 20080201
  SM_DRAGONPOINT = 20037;
  ET_OBJECTLEVELUP = 20038; //人物升级动画显示 20080222
  RM_CHANGEATTATCKMODE = 20039; //改变攻击模式 20080228
  SM_CHANGEATTATCKMODE = 20040; //改变攻击模式 20080228
  CM_EXCHANGEGAMEGIRD = 20042; //商铺兑换灵符  20080302
  SM_EXCHANGEGAMEGIRD_FAIL = 20043;//商铺购买物品失败
  SM_EXCHANGEGAMEGIRD_SUCCESS = 20044;
  RM_EXCHANGEGAMEGIRD_FAIL = 20045;
  RM_EXCHANGEGAMEGIRD_SUCCESS = 20046;
  RM_OPENDRAGONBOXS = 20047; //卧龙开宝箱 20080306
  SM_OPENDRAGONBOXS = 20048; //卧龙开宝箱 20080306
  RM_OPENBOXS_FAIL = 20049; //打开宝箱失败 20080306
  SM_OPENBOXS_FAIL = 20050; //打开宝箱失败 20080306

  RM_EXPTIMEITEMS = 20051;  //聚灵珠 发送时间改变消息 20080306
  SM_EXPTIMEITEMS = 20052;  //聚灵珠 发送时间改变消息 20080306

  ET_OBJECTBUTCHMON = 20053; //人物挖尸体得到物品显示 20080325
  ET_DRINKDECDRAGON = 20054;//喝酒抵御合击，显示自身效果 20090105

  SM_SENDHERONGRESUME  = 20055;//英雄内功恢复速度值，伤害值，防御值 20090812
//---------------------------淬练系统------------------------------------------
  RM_QUERYREFINEITEM = 20056; //打开淬练框口
  SM_QUERYREFINEITEM = 20057; //打开淬练框口
  CM_REFINEITEM = 20058;      //客户端发送淬练物品 20080507

  SM_UPDATERYREFINEITEM = 20059; //更新淬练物品 20080507
  CM_REPAIRFINEITEM = 20060; //修补火云石 20080507
  SM_REPAIRFINEITEM_OK = 20061; //修补火云石成功  20080507
  SM_REPAIRFINEITEM_FAIL = 20062; //修补火云石失败  20080507
//-----------------------------------------------------------------------------
  RM_DAILY = 20063;//逐日剑法 20080511
  SM_DAILY = 20064;//逐日剑法 20080511
  RM_GLORY = 20065;//发送到客户端 荣誉值 20080511
  SM_GLORY = 20066;//发送到客户端 荣誉值 20080511

  RM_GETHEROINFO = 20067;
  SM_GETHEROINFO = 20068; //获得英雄数据
  CM_SELGETHERO  = 20069; //取出英雄
  RM_SENDUSERPLAYDRINK = 20070;//出现请酒对话框 20080515
  SM_SENDUSERPLAYDRINK = 20071;//出现请酒对话框 20080515
  CM_USERPLAYDRINKITEM = 20072;//请酒框放上物品发送到M2
  SM_USERPLAYDRINK_OK = 20073;  //请酒成功  20080515
  SM_USERPLAYDRINK_FAIL = 20074; //请酒失败 20080515
  RM_PLAYDRINKSAY = 20075;//
  SM_PLAYDRINKSAY = 20076;
  CM_PlAYDRINKDLGSELECT = 20077; //商品选择,大类
  RM_OPENPLAYDRINK = 20078;   //打开窗口
  SM_OPENPLAYDRINK = 20079;   //打开窗口
  CM_PlAYDRINKGAME = 20080;  //发送猜拳码数 20080517
  RM_PlayDrinkToDrink = 20081; //发送到客户端谁赢谁输
  SM_PlayDrinkToDrink = 20082; //
  CM_DrinkUpdateValue = 20083; //发送喝酒
  RM_DrinkUpdateValue = 20084; //返回喝酒
  SM_DrinkUpdateValue = 20085; //返回喝酒
  RM_CLOSEDRINK = 20086;//关闭斗酒，请酒窗口
  SM_CLOSEDRINK = 20087;//关闭斗酒，请酒窗口
  CM_USERPLAYDRINK = 20088; //客户端发送请酒物品
  SM_USERPLAYDRINKITEM_OK = 20089;  //请酒物品成功
  SM_USERPLAYDRINKITEM_FAIL = 20090; //请酒物品失败
  RM_Browser = 20091;//连接指定网站
  SM_Browser = 20092;

  RM_PIXINGHIT = 20093;//劈星斩效果 20080611
  SM_PIXINGHIT = 20094;

  RM_LEITINGHIT = 20095;//雷霆一击效果 20080611
  SM_LEITINGHIT = 20096;

  CM_CHECKNUM = 20097;//检测验证码(DBServer) 20080612
  SM_CHECKNUM_OK = 20098;
  CM_CHANGECHECKNUM = 20099;//(DBServer)

  RM_AUTOGOTOXY = 20100;//自动寻路
  SM_AUTOGOTOXY = 20101;
//-----------------------酿酒系统---------------------------------------------
  RM_OPENMAKEWINE =20102;//打开酿酒窗口
  SM_OPENMAKEWINE =20103;//打开酿酒窗口
  CM_BEGINMAKEWINE = 20104;//开始酿酒(即把材料全放上窗口)
  RM_MAKEWINE_OK = 20105;//酿酒成功
  SM_MAKEWINE_OK = 20106;//酿酒成功
  RM_MAKEWINE_FAIL = 20107;//酿酒失败
  SM_MAKEWINE_FAIL = 20108;//酿酒失败
  RM_NPCWALK = 20109;//酿酒NPC走动
  SM_NPCWALK = 20110;//酿酒NPC走动
//------------------------挑战系统--------------------------------------------
  SM_CHALLENGE_FAIL = 20113;//挑战失败
  SM_CHALLENGEMENU =20114;//打开挑战抵押物品窗口
  CM_CHALLENGETRY = 20115;//玩家点挑战

  CM_CHALLENGEADDITEM = 20116;//玩家把物品放到挑战框中
  SM_CHALLENGEADDITEM_OK = 20117;//玩家增加抵押物品成功
  SM_CHALLENGEADDITEM_FAIL = 20118;//玩家增加抵押物品失败
  SM_CHALLENGEREMOTEADDITEM = 20119;//发送增加抵押的物品后,给客户端显示

  CM_CHALLENGEDELITEM = 20120;//玩家从挑战框中取回物品
  SM_CHALLENGEDELITEM_OK= 20121;//玩家删除抵押物品成功
  SM_CHALLENGEDELITEM_FAIL = 20122;//玩家删除抵押物品失败
  SM_CHALLENGEREMOTEDELITEM = 20123;//发送删除抵押的物品后,给客户端显示

  CM_CHALLENGECANCEL = 20124;//玩家取消挑战
  SM_CHALLENGECANCEL = 20125;//玩家取消挑战

  CM_CHALLENGECHGGOLD = 20126; //客户端把金币放到挑战框中
  SM_CHALLENCHGGOLD_FAIL = 20127; //客户端把金币放到挑战框中失败
  SM_CHALLENCHGGOLD_OK = 20128; //客户端把金币放到挑战框中成功
  SM_CHALLENREMOTECHGGOLD = 20129; //客户端把金币放到挑战框中,给客户端显示

  CM_CHALLENGECHGDIAMOND = 20130; //客户端把金刚石放到挑战框中
  SM_CHALLENCHGDIAMOND_FAIL = 20131; //客户端把金刚石放到挑战框中失败
  SM_CHALLENCHGDIAMOND_OK = 20132; //客户端把金刚石放到挑战框中成功
  SM_CHALLENREMOTECHGDIAMOND = 20133; //客户端把金刚石放到挑战框中,给客户端显示

  CM_CHALLENGEEND = 20134;//挑战抵押物品结束
  SM_CLOSECHALLENGE = 20135;//关闭挑战抵押物品窗口
//----------------------------------------------------------------------------
  RM_PLAYMAKEWINEABILITY = 20136;//酒2相关属性 20080804
  SM_PLAYMAKEWINEABILITY = 20137;//酒2相关属性 20080804
  RM_HEROMAKEWINEABILITY = 20138;//酒2相关属性 20080804
  SM_HEROMAKEWINEABILITY = 20139;//酒2相关属性 20080804

  RM_CANEXPLORATION = 20140;//可探索 20080810
  SM_CANEXPLORATION = 20141;//可探索 20080810
//----------------------------------------------------------------------------
  SM_SENDLOGINKEY = 20142; //网关给客户端或登陆器发送登陆器封包码 20080901
  CM_SENDLOGINKEY = 142; //网关给客户端或登陆器发送登陆器封包码 20080901
  SM_GATEPASS_FAIL = 20143; //和网关的密码错误

  RM_USERBIGSTORAGEITEM = 20146;//用户无限仓库项目
  RM_USERBIGGETBACKITEM = 20147;//用户获得回的无限仓库项目
  RM_USERLEVELORDER = 20148;//用户等级命令

  RM_HEROAUTOOPENDEFENCE = 20149;//英雄内挂自动持续开盾 20080930
  SM_HEROAUTOOPENDEFENCE = 20150;//英雄内挂自动持续开盾 20080930
  CM_HEROAUTOOPENDEFENCE = 20151;//英雄内挂自动持续开盾 20080930

  RM_MAGIC69SKILLEXP = 20152;//内功心法经验
  SM_MAGIC69SKILLEXP = 20153;//内功心法经验
  RM_HEROMAGIC69SKILLEXP = 20154;//英雄内功心法经验  20080930
  SM_HEROMAGIC69SKILLEXP = 20155;//英雄内功心法经验  20080930

  RM_MAGIC69SKILLNH = 20156;//内力值(黄条) 20081002
  SM_MAGIC69SKILLNH = 20157;//内力值(黄条) 20081002
  RM_WINNHEXP = 20158;//取得内功经验 20081007
  SM_WINNHEXP = 20159;//取得内功经验 20081007
  RM_HEROWINNHEXP = 20160;//英雄取得内功经验 20081007
  SM_HEROWINNHEXP = 20161;//英雄取得内功经验 20081007

  SM_SHOWSIGHICON = 20162; //显示感叹号图标 20090126
  RM_HIDESIGHICON = 20163; //隐藏感叹号图标 20090126
  SM_HIDESIGHICON = 20164; //隐藏感叹号图标 20090126
  CM_CLICKSIGHICON = 20165; //点击感叹号图标 20090126
  SM_UPDATETIME = 20166;//统一与客户端的倒计时 20090129

  RM_OPENEXPCRYSTAL = 20167; //显示天地结晶图标 20090201
  SM_OPENEXPCRYSTAL = 20168; //显示天地结晶图标 20090201
  SM_SENDCRYSTALNGEXP = 20169; //发送天地结晶的内功经验 20090201
  SM_SENDCRYSTALEXP = 20170; //发送天地结晶的内功经验 20090201
  SM_SENDCRYSTALLEVEL = 20171; //发送天地结晶的等级 20090202
  CM_CLICKCRYSTALEXPTOP = 20172; //点击天地结晶获得经验 20090202
//----------------------------------------------------------------------------
  CM_OPENNEWBOXS = 20173;//打开新的宝箱
  CM_BUYNEWBOXSKEY = 20174; //购买新宝箱的钥匙
  CM_ROTATIONBOX = 20175;//转动宝箱 新模式
  RM_BOXITMEFILLED = 20176;//填充物品  新模式
  SM_BOXITMEFILLED = 20177;//填充物品  新模式
  CM_UPDADEBOXSITMES = 20178;//填充宝箱物品
  CM_REQUESTGUILDWAR = 20180;//行会窗口申请行会战 20090510

  RM_OPENCATTLEGAS = 20181;//显示牛气管 20090518
  SM_OPENCATTLEGAS = 20182;//显示牛气管 20090518
  SM_SENDCATTLEGASEXP = 20183; //发送牛气值经验与上限值 20090520
  SM_SENDCATTLEGASLEVEL = 20184; //发送牛气管等级 20090520
  RM_WINCATTLEGASEXP = 20185;//取得牛气值经验 20090520
  SM_WINCATTLEGASEXP = 20186;//取得牛气值经验 20090520
//--------------------------------连击相关-------------------------------------
  RM_OPENMAKEKIMNEEDLE = 20187;//客户端显示锻练金针窗口 20090615
  SM_OPENMAKEKIMNEEDLE = 20188;//客户端显示锻练金针窗口 20090615
  CM_ITEMSPLIT = 20189;//客户端拆分物品 20090615
  CM_ITEMMERGER = 20190;//客户端合并物品 20090615
  SM_MERGER_OK = 20191;//客户端合并物品成功
  SM_MERGER_FAIL = 20192;//客户端合并物品失败
  CM_EXERCISEKIMNEEDLE = 20193;//客户端开始练针 20090620
  SM_EXERCISEKIMNEEDLE_OK = 20194;//练针成功
  SM_EXERCISEKIMNEEDLE_FAIL = 20195;//练针失败
  RM_SENDUSERPULSEARR = 20196;//登陆时发送各经络的数据
  SM_SENDUSERPULSEARR = 20197;//登陆时发送各经络的数据 20090621
  CM_OPENPULSEPOINT = 20198;//客户端点击穴位 20090621
  CM_CLICKBATTERNPC = 20199; //连击NPC执行触发脚本段 20090623
  SM_SENDUPDATAPULSEARR = 20200;//更新经络数据 20090623
  CM_PRACTICEPULSE = 20201;//客户端修炼经络 20090623
  CM_USEBATTERSPELL = 20202; //使用连击 20090624
  RM_SENDUSERPULSESHINY = 20203;//待打通的穴位发亮 20090624
  SM_SENDUSERPULSESHINY = 20204;//待打通的穴位发亮 20090624

  RM_BATTERHIT1 = 20205;//追心刺 20090625
  SM_BATTERHIT1 = 20206;//追心刺 20090625
  RM_BATTERHIT2 = 20207;//三绝杀 20090702
  SM_BATTERHIT2 = 20208;//三绝杀 20090702

  RM_SENDCANUSEBATTER = 20209;//发送可使用连击的通知
  SM_SENDCANUSEBATTER = 20210;//发送可使用连击的通知

  RM_BATTERHIT3 = 20211;//横扫千军 20090702
  SM_BATTERHIT3 = 20212;//横扫千军 20090702
  RM_BATTERHIT4 = 20213;//断岳斩
  SM_BATTERHIT4 = 20214;//断岳斩

  RM_RUSH79 = 20215;//追心刺成功
  SM_RUSH79 = 20216;

  RM_BATTEROVER = 20217;//道法连击结束
  SM_BATTEROVER = 20218;//道法连击结束

  RM_10102 = 20219;//战连击消息，使人后仰 20090726

  CM_CLIENTPUNISHMENT = 20220; //玩家违法操作，进入QF @Punishment 20090808
  RM_SENDNGRESUME  = 20221;//内功恢复速度值，伤害值，防御值 20090812
  SM_SENDNGRESUME  = 20222;//内功恢复速度值，伤害值，防御值 20090812

  SM_SENDHEROPULSESHINY = 20223;//英雄待打通的穴位发亮
  SM_SENDHEROPULSEARR = 20224;//登陆时发送各经络的数据

  CM_OPENHEROPULSEPOINT = 20225;//客户端点击英雄穴位
  SM_SENDHEROUPDATAPULSEARR = 20226;//更新英雄经络数据
  CM_HEROPRACTICEPULSE = 20227;//客户端英雄修炼经络 20090911

  SM_SENDHEROGETPULSEEXP = 20228;//发送英雄取到的经络经验

  CM_HEROUSEBATTERTOMON = 20231;//英雄打怪是否使用连击

  RM_OPEN4BATTERSKILL = 20232;//开启第四连击技能 20100720
  SM_OPEN4BATTERSKILL = 20233;//开启第四连击技能 20100720

  RM_OPENSHINY = 20234;//显示成长任务
  SM_OPENSHINY = 20235; //显示成长任务
  CM_CLICKMMISSION = 20236;//客户端点击任务栏按钮
  RM_CLICKMMISSION = 20237;//M2回复客户端点击事件
  SM_CLICKMMISSION = 20238;//M2回复客户端点击事件
  RM_SHOWSHINY = 20239; //在客户端让“成长任务”按键发亮
  SM_SHOWSHINY = 20240; //在客户端让“成长任务”按键发亮
  RM_PALYVIDEO = 20242;//播放指定的视频文件
  SM_PALYVIDEO = 20243;//播放指定的视频文件
  RM_HEAR2 = 20244;

  RM_OpenRefineArmyDrum = 20251;    // 打开淬炼军鼓窗口, 这个是NPC发给TPlayObject
  SM_OpenRefineArmyDrum = 20252;    // 打开淬炼军鼓窗口
  CM_RefineArmyDrum = 20253;        // 客户端发送淬练军鼓的物品

  CM_DragonRect = 20254;        // 客户端发送淬练军鼓的物品
  RM_DragonRect = 20256;        // 客户端发送淬练军鼓的物品
  SM_DragonRect = 20257;        // 客户端发送淬练军鼓的物品

  //
  SM_HUMTAKEITEM = 20255;  // 玩家佩戴护身戒指 wParam=1 佩戴 0:摘掉
  RM_HUMTAKEITEM = 20256;
  SM_SENDLOGINFAILBYHC = 20258; //发送网关封机器码

  ////////////////////////////////////////////////////////////////////////////////
  UNITX = 48;//客户端使用
  UNITY = 32;//客户端使用
  HALFX = 24;//客户端使用
  HALFY = 16;//客户端使用

  MAXMAGIC = 35; //最大普通技能数
  MAXNGMAGIC = 30; //最大内功技能数
  MAXBAGITEM = 46;//人物背包最大数量(仓库物品数量)
  MAXHEROBAGITEM = 40; //英雄包裹最大数量
  MAXUSEITEM = 13;//身上装备数量
  MAXSTORAGEITEM = 50;
  LOGICALMAPUNIT = 40;
type
  TMonStatus = (s_KillHuman{杀人}, s_UnderFire{被攻击}, s_Die{死亡}, s_MonGen{刷出});//怪物说类型
  TMsgColor = (c_Red{红}, c_Green, c_Blue{蓝}, c_White, c_Fuchsia{千里传音颜色},BB_Fuchsia{宝宝相关提示},C_HeroHint{英雄状态});
  TMsgType = (t_Notice{公告}, t_Hint{暗示}, t_System{系统}, t_Say, t_Mon, t_GM, t_Cust, t_Castle{城堡});
  TDefaultMessage = record
    Recog: Integer;//识别码
    Ident: Word;
    Param: Word;
    Tag: Word;
    Series: Word;
    nSessionID: Integer;//客户端会话ID 20081210
  end;
  pTDefaultMessage = ^TDefaultMessage;

  {TItemType = (i_HPDurg,i_MPDurg,i_HPMPDurg,i_OtherDurg,i_Weapon,i_Dress,i_Helmet,i_Necklace,i_Armring,i_Ring,i_Belt,i_Boots,i_Charm,i_Book,i_PosionDurg,i_UseItem,i_Scroll,i_Stone,i_Gold,i_Other);
                              //  [药品] [武器]      [衣服]    [头盔][项链]     [手镯]      [戒指] [腰带] [鞋子] [宝石]         [技能书][毒药]        [消耗品][其它]
  TShowItem = record
    sItemName    :String;
   // ItemType     :TItemType;
    boAutoPickup :Boolean;
    boShowName   :Boolean;
    //nFColor      :Integer;
    //nBColor      :Integer;
  end;
  pTShowItem = ^TShowItem;  }


  TOSObject = record
    btType: Byte;//类型
    CellObj: TObject;//对像
    dwAddTime: LongWord;//增加的时间
    boObjectDisPose: Boolean;//类是否在释放
  end;
  pTOSObject = ^TOSObject;

  TSendMessage = record
    wIdent: Word;
    wParam: Word;
    nParam1: Integer;
    nParam2: Integer;
    nParam3: Integer;
    BaseObject: TObject;
    dwAddTime: LongWord;
    dwDeliveryTime: LongWord;//传出的时间
    boLateDelivery: Boolean;//是否最后传出
    Buff: PChar;
  end;
  pTSendMessage = ^TSendMessage;

  TProcessMessage = record
    wIdent: Word;
    wParam: Word;
    nParam1: Integer;
    nParam2: Integer;
    nParam3: Integer;
    BaseObject: TObject;
    boLateDelivery: Boolean;//延时传递
    dwDeliveryTime: LongWord;//延时时间
    sMsg: string;
  end;
  pTProcessMessage = ^TProcessMessage;

  TLoadHuman = record//M2,DBS使用(英雄与主体使用同一结构)
    sAccount: string[12];//账号
    sChrName: string[ACTORNAMELEN];//名字
    sUserAddr: string[15];//IP地址
    nSessionID: Integer;//会话ID
    boIsNewHero: boolean;//是否副将
    nJob: Byte;//副将职业 0-战 1-法 2-道 3-刺客
  end;

  TShortMessage = record
    Ident: Word;
    wMsg: Word;
  end;

  TMessageBodyW = record
    Param1: Word;
    Param2: Word;
    Tag1: Word;
    Tag2: Word;
  end;

  TFeatures = packed record//外观结构
    nDress: Word;//衣服
    nWeapon: Word;//武器
    nRaceImg: Word;//角色类型
    btHair: Byte;//发型
    btStatus:Byte;
    //nAppr: Word;//怪使用
    nDressLook: Word;//衣服外观特效
    nDressLookWil: Byte;//衣服外观WIL索引
    nWeaponLook: Word;//武器外观特效
    nWeaponLookWil: Byte;//武器外观WIL索引
  end;

  TMessageBodyWL2 = record
    lParam1: Integer;
    lParam2: Integer;
    lTag1: Integer;
    lTag2: Integer;
  end;

  TMessageBodyWL = record
    lParam1: Integer;
    lParam2: Integer;
    lTag1: Integer;
    lTag2: Integer;
    MonShowName: Byte;//宠物显名 20110713
    feature: TFeatures;
  end;

  TCharDesc = record
    Status: Integer;
    MonShowName: Byte;//宠物显名 20110713
    feature: TFeatures;
  end;

  TCharDesc1 = record//怪记录坐标使用
    feature: Integer;
    Status: Integer;
  end;

  TSessInfo = record //全局会话
    sAccount: string[12];
    sIPaddr: string[15];
    nSessionID: Integer;
    dwHCode:DWord;//下面的没用 这个是硬件码
    nPayMent: Integer;//充值点
    nPayMode: Integer;//充值模式
    nSessionStatus: Integer;
    dwStartTick: LongWord;
    dwActiveTick: LongWord;
    nRefCount: Integer;
  end;
  pTSessInfo = ^TSessInfo;

  TQuestInfo = record
    wFlag: Word;
    btValue: Byte;
    nRandRage: Integer;
  end;
  pTQuestInfo = ^TQuestInfo;

  TScript = record
    boQuest: Boolean;
    QuestInfo: array[0..9] of TQuestInfo;
    nQuest: Integer;
    RecordList: TList;
  end;
  pTScript = ^TScript;

  TMonItem = record
    n00: Integer;//出现值 1/10中的1
    n04: Integer;//机率上限 1/10中的10
    sMonName: string;//物品名称
    n18: Integer;//物品数量
    NewMonList: TList;//新模式
  end;
  pTMonItem = ^TMonItem;

  TItemName = record
    nItemIndex: Integer;
    nMakeIndex: Integer;
    sItemName: string;
  end;
  pTItemName = ^TItemName;

  TVarType = (vNone, vInteger, vString);

  TDynamicVar = record//个人变量结构
    sName: string;
    VarType: TVarType;
    nInternet: LongWord;
    sString: string;
  end;
  pTDynamicVar = ^TDynamicVar;

  TRecallMigic = record
    nHumLevel: Integer;
    sMonName: string;
    nCount: Integer;
    nLevel: Integer;
  end;

  TMonSayMsg = record
    nRate: Integer;//机率
    sSayMsg: string;//说话内容
    State: TMonStatus;//状态
    Color: TMsgColor;//颜色
  end;
  pTMonSayMsg = ^TMonSayMsg;

  TMonDrop = record//怪物爆物品类
    sItemName: string;//物品类
    nDropCount: Integer;//已爆数量
    nNoDropCount: Integer;//未爆数量
    nCountLimit: Integer;//可爆数量
  end;
  pTMonDrop = ^TMonDrop;

  TGameCmd = record
    sCmd: string[25];
    nPermissionMin: Integer;
    nPermissionMax: Integer;
  end;
  pTGameCmd = ^TGameCmd;

  TSrvNetInfo = record
    sIPaddr: string[15];
    nPort: Integer;
  end;
  pTSrvNetInfo = ^TSrvNetInfo;

  TCheckCode = record
  end;

  TOnTimer=packed record//个人定时器
    NextTimer   :LongWord;
    RunCount    :Byte;
    Interval    :LongWord;
    nIdx        :Byte;
  end;
  pTOnTimer=^TOnTimer;   

  TStdItem = packed record//不可随意修改，会影响装备排行榜 20110315
    Name: string[14*2];//物品名称14
    StdMode: Byte; //物品分类 0/1/2/3：药， 5/6:武器，10/11：盔甲，15：头盔，22/23：戒指，24/26：手镯，19/20/21：项链
    Shape: Byte;//装配外观
    Weight: Byte;//重量
    AniCount: {Byte}Word;//20110131 扩展
    Source: ShortInt;//源动力
    Reserved: Byte; //保留
    NeedIdentify: Byte; //需要记录日志
    Looks: Word; //外观，即Items.WIL中的图片索引
    DuraMax: Word; //最大持久
    Reserved1: Word;//发光属性
    AC: Integer; //0x1A
    MAC: Integer; //0x1C
    DC: Integer; //0x1E
    MC: Integer; //0x20
    SC: Integer; //0x22
    Need: Integer; //0x24
    NeedLevel: Integer; //0x25
    Price: Integer; //价格
    Stock: Integer;//装备穿戴条件：声望+等级，保存声望条件使用
    nHP:Integer;  // 物品的体力值  on 2012.12.31
    nMP:Integer; // 物品的魔法值 add by liuzhigang  on 2012.12.31
  end;
  pTStdItem = ^TStdItem;

  TOStdItem = packed record //OK
    Name: string[14];
    StdMode: Byte;
    Shape: Byte;
    Weight: Byte;
    AniCount: Byte;
    Source: ShortInt;
    Reserved: Byte;
    NeedIdentify: Byte;
    Looks: Word;
    DuraMax: Word;
    AC: Word;
    MAC: Word;
    DC: Word;
    MC: Word;
    SC: Word;
    Need: Byte;
    NeedLevel: Byte;
    w26: Word;
    Price: Integer;
  end;
  pTOStdItem = ^TOStdItem;

  TOClientItem = record //OK
    s: TOStdItem;
    MakeIndex: Integer;
    Dura: Word;
    DuraMax: Word;
  end;
  pTOClientItem = ^TOClientItem;

  TClientItem = packed record //OK 20110710 加packed，有TDateTime类型一定要加packed，不然与客户端大小不一致(影响装备排行榜)
    s: TStdItem;
    MakeIndex: Integer;
    Dura: Word;
    DuraMax: Word;
    btValue:array[0..20] of Byte;  // 放置附加属性值的(前5个放置:AC MAC DC MC SC) add by liuzhigang on 2011.12.20
    btAppraisalLevel : Byte;//0-是否可鉴定(1-可鉴定 2-一鉴 3-二鉴 4-三鉴)
    btUnKnowValueCount : Byte;
    btAppraisalValue :array[2..5] of Byte;
    //6..9
    btUnKnowValue: array[6..9] of Byte;
    //btUnKnowValue: array[0..9] of Byte;//鉴定属性
    Aura: Byte;//当前灵气值
    MaxAura: Byte;//灵气值上限
    MaxDate: TDateTime;//最大使用日期
    BindValue: Byte;//1限时物品 2绑定期(过绑定期后可使用,绑定期不可交易,不爆) 3永久绑定(自己可使用,不可交易,掉后不可捡起)
  end;
  PTClientItem = ^TClientItem;

  TEffecItem = packed record//物品特效
    sName : string[14*2];
    wBagIndex: Word;//包裹开始图片
    btBagCount: Byte;//包裹播放数量
    nBagX: ShortInt;//包裹X坐标修正
    nBagY: ShortInt;//包裹Y坐标修正
    btBagWilIndex: Byte;//包裹Wil索引
    wShapeIndex: Word;//内观开始图片
    btShapeCount: Byte;//内观播放数量
    nShapeX: ShortInt;//内观X坐标修正
    nShapeY: ShortInt;//内观Y坐标修正
    btShapeWilIndex: Byte;//内观Wil索引
    wLookIndex: Word;//外观开始图片
    //btLookCount: Byte;//外观播放数量
    //nLookX: ShortInt;//外观X坐标修正
    //nLookY: ShortInt;//外观Y坐标修正
    btLookWilIndex: Byte;//外观Wil索引
  end;
  pTEffecItem = ^TEffecItem;
  TXinJianDingData = record
    ItemValueRetainMarks : array [0..3] of Byte; //保留属性
    Item3MakeIndex : Integer;
  end;
  {TClientEffecItem = record
    ClientItem: TClientItem;
    ClientEffec:TEffecItem;
  end;
  pTClientEffectItem = ^TClientEffecItem; }

  TMonInfo = record
    sName: string[14];//怪物名
    btRace: Byte;//种族
    btRaceImg: Byte;//种族图像
    wAppr: Word;//形像代码 1000> 值时，值为258，即mon25.wil第8个怪；当值10000>值且1000<值时，值为3315,即mon33.wil第15个怪 
    wLevel: Word;
    btLifeAttrib: Byte;//不死系
    boUndead: Boolean;
    wCoolEye: Word;//视线范围
    dwExp: LongWord;
    wMP: {Word}Integer;//20091026 修改
    wHP: {Word}Integer;//20091026 修改
    wAC: Word;
    wMAC: Word;
    wDC: Word;
    wMaxDC: Word;
    wMC: Word;
    wSC: Word;
    wSpeed: Word;
    wHitPoint: Word;//命中率
    wWalkSpeed: Word;//行走速度
    wWalkStep: Word;//行走步伐
    wWalkWait: Word;//行走等待
    wAttackSpeed: Word;//攻击速度
    ItemList: TList;
  end;
  pTMonInfo = ^TMonInfo;

  TMagic = record //技能类
    wMagicId: Word;//技能ID
    sMagicName: string[18];//技能名称
    btEffectType: Byte;//动作效果
    btEffect: Byte;//魔法效果
    wSpell: Word;//魔法消耗
    wPower: Word;//基本威力(客户端:怒之技能强化所需的内功等级)
    TrainLevel: array[0..3] of Byte;//技能等级
    MaxTrain: array[0..3] of LongWord;//各技能等级最高修炼点  68,71,99,100技能MaxTrain[0]--升级修炼点数 20091223修改
    btTrainLv: Byte;//修炼等级
    btJob: Byte;//职业 0-战 1-法 2-道 3-刺客
    dwDelayTime: LongWord;//技能延时
    btDefSpell: Byte;//升级魔法
    btDefPower: Byte;//升级威力
    wMaxPower: Word;//最大威力(客户端:怒之技能强化所需的绿宝石数)
    btDefMaxPower: Byte;//升级最大威力
    sDescr: string[8];//备注说明:空为主体技能 “英雄” “连击” “内功” “通用” “神技”
  end;
  pTMagic = ^TMagic;

  TClientMagic = record //84
    Key: Char;//连击技能，1-表示此技能在第一格位置 2-表示此技能在第二格位置 3-表示此技能在第三格位置
    Level: Byte;//技能等级
    CurTrain: LongWord;//连击技能:0-为空 1-随机  普通技能:当前经验
    Def: TMagic;
    btLevelEx: Byte;//强化等级 20110812
  end;
  PTClientMagic = ^TClientMagic;

  TUserMagic = record
    MagicInfo: pTMagic;
    wMagIdx: Word;//技能ID
    btLevel: Byte;//等级
    btKey: Byte;//技能快捷键 英雄技能、内功技能(0-技能开,1--技能关)
    nTranPoint: LongWord;//当前修练值
    btLevelEx: Byte;//强化等级 20110812
  end;
  pTUserMagic = ^TUserMagic;

  THumMagic = record //人物技能(DB)
    wMagIdx: Word;//技能ID
    btLevel: Byte;//等级
    btKey: Byte;//技能快捷键  英雄:0-技能开,1--技能关
    nTranPoint: LongWord; //当前修练值
    btLevelEx: Byte;//强化等级  20110812 扩展********
  end;
  THumNGMagic = record //内功技能(DB)
    wMagIdx: Word;//技能ID
    btLevel: Byte;//等级
    btKey: Byte;//技能快捷键  英雄:0-技能开,1--技能关
    nTranPoint: LongWord; //当前修练值
  end;

  TShopInfo = record//商铺物品
    StdItem: TSTDITEM;
    sIntroduce:array [0..200] of Char;
    Idx: string[1];
    ImgBegin: string[5];
    Imgend: string[5];
    Introduce1:string[20];
  end;
  pTShopInfo = ^TShopInfo;

  TUnbindInfo = record//发送客户端解包数据
    nUnbindCode: Integer;
    sItemName: string[14*2];
  end;
  pTUnbindInfo = ^TUnbindInfo;

  TAdminInfo = record //管理员表
    nLv: Integer;
    sChrName: string[ACTORNAMELEN];
    sIPaddr: string[15];
  end;
  pTAdminInfo = ^TAdminInfo;

  TMasterList = record //徒弟数量排行  20080530
    ID:Integer;//排名
    sChrName: string[ACTORNAMELEN];//徒弟名
  end;
  pTMasterList = ^TMasterList;

  TNakedAbility = packed record //Size 20 属性奖励
    DC: Word;
    MC: Word;
    SC: Word;
    AC: Word;
    MAC: Word;
    HP: Word;
    MP: Word;
    Hit: Word;
    Speed: Word;
    X2: Word;
  end;
  pTNakedAbility = ^TNakedAbility;
  TExpData = record
    nExp: Int64; //当前经验
    nMaxExp: Int64; //经验上限
    //nCurAdd: Int64; //经验上限
  end;
  TAbility = packed record//Size 40
    Level: Word; //等级
    AC: Integer; //防御
    MAC: Integer; //魔防
    DC: Integer; //攻击力
    MC: Integer; //魔法
    SC: Integer; //道术
    HP: Integer;//当前HP
    MP: Integer;//当前MP
    MaxHP: Integer;//HP上限
    MaxMP: Integer;//MP下限
    nExp: Int64; //当前经验
    nMaxExp: Int64; //经验上限
    Weight: Word; //
    MaxWeight: Word; //背包
    WearWeight: Word; //穿戴负重
    MaxWearWeight: Word;//穿戴负重上限
    HandWeight: Word; //
    MaxHandWeight: Word;//腕力
    Alcohol:Word;//酒量
    MaxAlcohol:Word;//酒量上限
    WineDrinkValue: Word;//醉酒度
    MedicineValue: Word;//当前药力值
    MaxMedicineValue: Word;//药力值上限
    {$IF M2Version = 1}
    TransferValue: Word;//当前斗转值
    MaxTransferValue: Word;//斗转值上限
    {$IFEND}
  end;
  pTAbility = ^TAbility;

  TOAbility = packed record//人物数据使用
    Level: Word;//等级
    AC: Word;//HP 上限 20091026
    MAC: Word;//MP 上限 20091026
    DC: Word;//MaxHP 上限 20091026
    MC: Word;//MaxMP 上限 20091026
    SC: Word;//LoByte()-自动修炼修炼场所 HiByte()-自动修炼修炼强度(主体)
    HP: Word;//-AC,HP下限
    MP: Word;//-MAC,Mp下限
    MaxHP: Word;//-DC,MaxHP下限
    MaxMP: Word;//-MC,MaxMP下限
    NG: Word;//当前内力值LoWord()
    MaxNG: Word;//当前内力值HiWord()
    nExp: Int64; //当前经验
    nMaxExp: Int64; //经验上限
    Weight: Word;
    MaxWeight: Word;//最大重量
    WearWeight: Byte;
    MaxWearWeight: Byte;//最大负重
    HandWeight: Byte;
    MaxHandWeight: Byte;//腕力
  end;
  pTOAbility = ^TOAbility;

  TAddAbility = record //OK    //Size 40
    wHP: Integer;//HP上限
    wMP: Integer;//MP上限
    wHitPoint: Word;
    wSpeedPoint: Word;
    wAC: Integer;//防御 上限下限
    wMAC: Integer;//魔御 上限下限
    wDC: Integer;//攻击力 上限下限
    wMC: Integer;//魔法 上限下限
    wSC: Integer;//道术 上限下限
    bt1DF: Byte; //神圣
    wIncDragon: Byte;//合击威力点数
    wAntiPoison: Word;//中毒躲避
    wPoisonRecover: Word;//中毒恢复
    wHealthRecover: Word;//体力恢复
    wSpellRecover: Word;//魔法恢复
    wIncNHRecover: Word;//内力恢复%比例 20090331
    wIncNHPoint: Word;//内力恢复点数 20090712
    wUnBurstRate: Byte;//防爆点数 20091227
    wDecTargetNHPoint: Byte;//目标内力值减少点数 20100513
    wAntiMagic: Word;
    btLuck: Byte;//幸运
    btUnLuck: Byte;//诅咒
    nHitSpeed: Integer;
    btWeaponStrong: Byte;//强度
    wWearWeight: Word;//负重 20080325
    btBurstRate: Byte;//物品爆率 20091129
    wVampirePoint: Byte;//吸血点数(虎威)
    wVampireRate: Byte;//吸血机率(虎威)
    wUnParalysisRate: Word;//防麻机率(辉煌衣服) 20100513
    wParalysisAddRate: Word;//麻痹强化(比如：军鼓)
  end;
  pTAddAbility = ^TAddAbility;

{$IF M2Version <> 2}
  TAddUnKnowAbility = record  //鉴定属性
    boRebirth: Boolean;//重生技能
    boMagicShield: Boolean;//八卦护身技能
    boParalysis: Boolean;//麻痹技能 
    boParalysis2: Boolean;//魔道麻痹技能
    boParalysis1: Boolean;//战意麻痹技能
    boProbeNecklace: Boolean;//探测技能
    boTeleport: Boolean;//传送技能
    wDC: Word;//攻击力 上限
    wMC: Word;//魔法 上限
    wSC: Word;//道术 上限
    wMAC: Word;//魔御 上限
    wAC: Word;//防御 上限
    wMain: Word;//主属性
    wIncNHPoint: Word;//内力恢复点数
    wMagicShieldLevel: Word;//聚魔等级(加蓝，职业不同加的量不同 战+50 法+20 道+35)
    wPhysicalLevel: Word;//强身等级(加血，职业不同加的量不同 战+50 法+20 道+35)
    wVampirePoint: Byte;//吸血上限(虎威)
    wDecTargetNHLevel: Byte;//内伤等级
    wCritLevel: Byte;//暴击等级
    wUnBurstRate: Byte;//防爆
    wHitPoint: Byte; //准确
    wSpeedPoint: Byte; //敏捷
    wUnParalysisRate: Byte;//麻痹抗性(辉煌衣服)
    wParalysisAddRate: Byte;//麻痹强化(比如：军鼓)
    wIncDragonRate: Word;//合击威力
    //灵媒品质 用btValue[11]保存，武器用btValue[12]
  end;

  TFengHaoAbility = record//称号属性
    wHP: Word;//生命上限
    wDC: Word;//攻击力 上限
    wMC: Word;//魔法 上限
    wSC: Word;//道术 上限
    wMagicShieldLevel: Word;//聚魔等级
    wUnParalysisRate: Byte;//麻痹抗性
    wParalysisAddRate: Byte;//麻痹强化(比如：军鼓)
    wPhysicalLevel: Word;//强身等级
    wDecTargetNHPoint: Byte;//内伤等级
    wCritLevel: Byte;//暴击等级
    wIncDragonRate: Word;//合击威力
    //暂时不处理以下属性
    wExpRate: Word;//经验倍数
  end;

  TClientHeartAbility = record//心法结构
      {
    boTpye: Boolean;//心法类型 F-传承心法 T-龙卫心法
    sUpLevelSKillName: String[16];//可学的强化技能
    nHeartTpye: Byte;//心法类型 0-紫金 1-乙木 2-大地 3-葵水 4-阳炎
    wUpPower: Word;//下一级 属性下限(龙卫心法)  防属性(传承心法)
    wUpMaxPower: Word;//下一级 属性上限(龙卫心法) 魔防属性(传承心法)
    wPower: Word;//属性下限
    wMaxPower: Word;//属性上限
    wUpPassHeartLevel: Byte;//下一级传承心法师傅心法等级
    wUpLevel: Word;//下一级传承心法自己等级条件
    }
    boHeartTpye: Boolean;//心法类型 F-传承心法 T-龙卫心法
    sUpLevelSKillName: String[16];//可学的强化技能
    nHeartTpye: Byte;//心法类型 0-紫金 1-乙木 2-大地 3-葵水 4-阳炎
    wUpDefence: Word;//下一级 属性下限(龙卫心法)  防属性(传承心法)
    wUpMaxDefence: Word;//下一级 属性上限(龙卫心法) 魔防属性(传承心法)
    wMainPower: Word;//属性下限
    wMainMaxPower: Word;//属性上限
    wUpPassHeartLevel: Byte;//下一级传承心法师傅心法等级
    wUpLevel: Word;//下一级传承心法自己等级条件
  end;
{$IFEND}

  TWAbility = record
    dwExp: LongWord; //怪物经验值(Dword)
    wHP: Word;
    wMP: Word;
    wMaxHP: Word;
    wMaxMP: Word
  end;

  TMerchantInfo = record
    sScript: string[14];
    sMapName: string[14];
    nX: Integer;
    nY: Integer;
    sNPCName: string[40];
    nFace: Integer;
    nBody: Integer;
    boCastle: Boolean;
  end;
  pTMerchantInfo = ^TMerchantInfo;

  TSocketBuff = record
    Buffer: PChar; //0x24
    nLen: Integer; //0x28
  end;
  pTSocketBuff = ^TSocketBuff;

  TSendBuff = record
    nLen: Integer;
    Buffer: array[0..DATA_BUFSIZE - 1] of Char;
  end;
  pTSendBuff = ^TSendBuff;
 {$IF M2Version <> 2}
  TClientDominatPoint = record
    nIdx: Byte;//位置ID
    m_sMapDesc: string[MAPNAMELEN];//地图名称
  end;
  TDominatSendPoint = record //主宰令传送结构
    nIdx: Byte;//位置ID
    m_sMapDesc: string[MAPNAMELEN];//地图名称
    m_sMapName: string[MAPNAMELEN];//地图ID
    m_nCurrX: Integer; //座标X(4字节)
    m_nCurrY: Integer; //座标Y(4字节)
  end;
  pTDominatSendPoint = ^TDominatSendPoint;

  TClientHumName = record//护花使者或龙卫名称结构
    sChrName: string[ACTORNAMELEN];//名字
    boOnline: Boolean;//是否在线
  end;
  pTClientHumName = ^TClientHumName;

  TClientHumTitle = packed record//客户端称号结构
    MakeIndex: Integer;//称号制造ID
    StdMode: Byte; //分类
    AniCount: Word;//特效ID
    Looks: Word;//称号图片
    nHours: Word;//剩余小时
    sTitleName: String[ACTORNAMELEN];//称号名
    wDura: Word;//千里传音次数(水晶之星－－需保存)
    wDC: Word;//攻击上限
    wMC: Word;//魔法上限
    wSC: Word;//道术上限  
    wHP: Word;//生命上限
  end;

  TClientHumTitles = packed record//发送客户端称号结构
    nUseTitleIndex: Byte;//使用称号索引
    ClientHumTitles: array[0..7] of TClientHumTitle;//称号数据
  end;

//数据库结构
  THumTitleDB = packed record//称号结构
    Idx: Integer;
    sTitleName: String[ACTORNAMELEN];//称号
    StdMode: Byte; //分类
    Shape: Byte;//装配外观    
    AniCount: Word;
    nHours: Word; //使用期
    Looks: Word; //外观，即WIL中的图片索引
    DuraMax: Word; //最大持久(千里传音)
    AC: Integer; //AC1 - AC2 
    MAC: Integer; //Mac1 - Mac2
    DC: Integer; //攻击
    MC: Integer; //魔法
    SC: Integer; //道术
    Need: Integer;//需要条件
    NeedLevel: Integer;//条件值
    Stock: Integer;//备用
  end;
  pTHumTitleDB = ^THumTitleDB;

  TClientDivisionInfo = record//查询门派数据结构
    sDivisionName: string[14];//门派名称
    sChrName: string[ACTORNAMELEN];//师傅名
    nPopularity: Integer;//人气值
    nStatus: Byte;//状态(0-显示"申请加入" 1-显示"取消申请" 2-不显示"申请加入","取消申请")
  end;
  pTClientDivisionInfo = ^TClientDivisionInfo;
{$IFEND}
  TDivisionMember = packed record//师门成员数据
    btGender: Byte; //性别
    btJob: Byte; //职业 0-战 1-法 2-道 3-刺客
    nLevel: Word; //等级
    nContribution: LongWord;//贡献值
    dLogonTime: TDateTime; //登录时间
    boStatus: Boolean;//状态(在线、离线)
  end;
  pTDivisionMember = ^TDivisionMember;

  TClientDivisionMember = record
    sChrName: string[ACTORNAMELEN];//名称
    DivisionMember: TDivisionMember;
  end;  
  pTClientDivisionMember = ^TClientDivisionMember;
  
  TApplyDivision = record//申请入师门结构 20110731
    sChrName: string[ACTORNAMELEN];//名字
    btGender: Byte;//性别
    btJob: Byte;//职业
    nLevel: Word;//等级
  end;
  pTApplyDivision = ^TApplyDivision;  

  THumTitle = packed record//人物称号结构 20110130
    ApplyDate: TDateTime;//到期时间
    MakeIndex: Integer;//称号制造ID
    wIndex: Word; //称号索引id
    boUseTitle: Boolean;//使用此称号
    wDura: Word;//千里传音次数(水晶之星)
    wMaxDura: Word;
    sChrName: string[ACTORNAMELEN];//任命者(主宰龙卫，护花使者)
  end;
  pTHumTitle = ^THumTitle;

  TUserItem = packed record //20110130 扩展
    MakeIndex: Integer;//制造ID
    wIndex: Word; //物品id
    Dura: Word; //当前持久值
    DuraMax: Word; //最大持久值
    //放置的装备附加属性 0:AC 1:MAC 2: DC 3:MC 4:SC:
    btValue: array[0..20] of Byte;    //附加属性:8-神秘装备 9-(升级次数)装备等级 12-发光(1为发光,0不发光,2聚灵珠不能聚集 武器,衣服,头盔无效),13-自定义名称,14-禁止扔、交易、修、卖、爆 15-,16-,17-,18-,19- 20-吸伤(聚灵珠,1-开始聚经验,2-聚结束) 11-武器类暴击等级 10-武器升级设置(1-破碎 10-12增加DC, 20-22增加MC，30-32增加SC)
    //btUnKnowValue: array[0..9] of Byte; //0-是否可鉴定(1-可鉴定 2-一鉴 3-二鉴 4-三鉴)
                                        //1-存在多少神性属性(0-无 1-1个属性 2-2个属性 3-3个属性 4-4个属性)
                                        //未知属性(鉴定使用)
    btAppraisalLevel : Byte;//0-是否可鉴定(1-可鉴定 2-一鉴 3-二鉴 4-三鉴)
    btUnKnowValueCount : Byte;
    btAppraisalValue :array[2..5] of Byte;
    //6..9
    btUnKnowValue: array[6..9] of Byte;

                                        //1-存在多少神性属性(0-无 1-1个属性 2-2个属性 3-3个属性 4-4个属性)
                                        //未知属性(鉴定使用)
    AddValue: array[0..2] of Byte;//0-1限时物品 2绑定期(过绑定期后可使用,绑定期不可交易,不爆) 3永久绑定(自己可使用,不可交易,掉后不可捡起)
                                  //2-临时处理btValue14-19标实 20110528
    MaxDate: TDateTime;//最大使用日期 当AddValue[0]＝1时，到时间删除物品即限时物品  20110130 扩展
  end ;
  {TUserItem = record // 20100803 扩展  Size 44
    MakeIndex: Integer;
    wIndex: Word; //物品id
    Dura: Word; //当前持久值
    DuraMax: Word; //最大持久值
    btValue: array[0..20] of Byte;//附加属性:8-神秘装备 9-(升级次数)装备等级 12-发光(1为发光,0不发光,2聚灵珠不能聚集 武器,衣服,头盔无效),13-自定义名称,14-禁止扔,15-禁止交易,16-禁止存,17-禁止修,18-禁止出售,19-禁止爆出 20-吸伤(聚灵珠,1-开始聚经验,2-聚结束) 11-武器类暴击等级 10-武器升级设置(1-破碎 10-12增加DC, 20-22增加MC，30-32增加SC)
    btUnKnowValue: array[0..9] of Byte;//0-是否可鉴定(1-可鉴定 2-一鉴 3-二鉴 4-三鉴) 1-存在多少神性属性(0-无 1-1个属性 2-2个属性 3-3个属性 4-4个属性) 未知属性(鉴定使用)
  end ;}
  pTUserItem = ^TUserItem;   
 //(戒指)          0 AC2 防御  1 MAC2 魔御 2 DC2 攻击 3 MC2 魔法 4 SC2 道术 6 佩带需求 7 佩带级别 8-神秘装备 11-灵媒灵气值 9-10 12-13 暂不知道 14 持久
 //(武器)          0 DC2 1 MC2 2 SC2 3 幸运 4 诅咒 5 准确 6 攻击速度 7 强度 8-神秘装备 9-(升级次数)装备等级 10-需开封,武器升级设置(1-破碎 10-12增加DC, 20-22增加MC，30-32增加SC) 11-武器类暴击等级 12-灵媒灵气值 13-暂不知道 14 持久 20-出生带的暴击等级 
 //(衣服,靴子,腰带)0 防御 1 魔御 2 攻击 3 魔法 4 道术  11-灵媒灵气值 5-10 12-13 无效果 14 持久
 //(头盔)          0 防御 1 魔御 2 攻击 3 魔法 4 道术 5 佩带需求 6 佩带级别 7  8-神秘装备  11-灵媒灵气值 9-10 12-13 无效果 14 持久
 //(项链,手镯)     0 AC2 1 MAC2 2 DC2 3 MC2 4 SC2 6 佩带需求 7 佩带级别 8 Reserved  11-灵媒灵气值 9-10 12-13 暂不知道 14 持久
 //酒              0 品质 1 酒精度 2 药力值 3酒等级
 //酿酒材料        0 品质
 //神秘卷轴        0 等级 持久=熟练度
 //除魔灵媒        11-灵媒灵气值
{btUnKnowValue
0-是否可鉴定
无星  1－可鉴定 2－一鉴 3-二鉴  4-三鉴
1星: 11-可鉴定 12-一鉴 13-二鉴 14-三鉴
2星: 21-可鉴定 22-一鉴 23-二鉴 24-三鉴
3星: 31-可鉴定 32-一鉴 33-二鉴 34-三鉴
4星: 41-可鉴定 42-一鉴 43-二鉴 44-三鉴
5星: 51-可鉴定 52-一鉴 53-二鉴 54-三鉴

1-存在多少神性属性(0-无 1-1个属性 2-2个属性 3-3个属性 4-4个属性  再根据后四个属性位的值判断是否解读)
2..5 附加属性
6..9 神秘属性

1..10    技能属性(1-重生技能 2-八卦护身技能 3-麻痹技能 4-魔道麻痹技能 5-战意麻痹技能 6-探测技能 7-传送技能)
11..20   攻击上限
21..30   魔法上限
31..40   道术上限
41..50   魔防上限(魔法防御上限)
51..60   物防上限(物理防御上限)
61..70   主属性
71..80   内力恢复(同灵虚，金牛)
81..90   聚魔等级(加蓝，职业不同加的魔法上限应该是不同)
91..100  强身等级(加血，职业不同加的血量不同 战+50 法+20 道+35)
101..110 吸血上限(与虎威装备属性同)
111..120 内伤等级
121..130 暴击等级(可与赤炎石的暴击叠加)
131..140 防爆
141..150 准确
151..160 敏捷
161..180 麻痹抗性(1..20)
181..230 合击威力(1..50) (同金牛的合击伤害)
231..250 宝物灵媒 品质(11.4 * 值 上限228) 当前灵气值用btValue[11]保存，武器用btValue[12]
251..254 预留
255      神秘属性未解读}

  TMonItemInfo = record //怪物爆物品类(MonItems目录下,怪名.txt)
    SelPoint: Integer;//出现点数
    MaxPoint: Integer;//总点数
    ItemName: string;//物品名称
    Count: Integer;//物品数量
    NewMonList: TList;//新模式
  end;
  pTMonItemInfo = ^TMonItemInfo;

  TMapItem = record //地图物品
    Name: string[30];//名称
    Looks: Word; //外观
    AniCount: Byte;//StdItem.AniCount
    Reserved: Byte;//此参数不懂有什么用
    Count: Integer;//数量
    OfBaseObject: TObject;//物品谁可以捡起
    DropBaseObject: TObject;//谁掉落的
    dwCanPickUpTick: LongWord;
    UserItem: TUserItem;
  end;
  PTMapItem = ^TMapItem;

  TVisibleMapItem = record //可见的地图物品
    MapItem: PTMapItem;
    nVisibleFlag: Byte;//0-隐藏(不可见) 1-不需更新 2-需发消息更新
    nX: Integer;
    nY: Integer;
    sName: string;
    wLooks: Word;
  end;
  pTVisibleMapItem = ^TVisibleMapItem;

  TVisibleBaseObject = record
    BaseObject: TObject;
    nVisibleFlag: Byte;//0-清除 1-不更新 2-更新
  end;
  pTVisibleBaseObject = ^TVisibleBaseObject;

  THumanRcd = record
    sUserID: string[10];
    sCharName: string[14];
    btJob: Byte;
    btGender: Byte;
    btLevel: Byte;
    btHair: Byte;
    sMapName: string[16];
    btAttackMode: Byte;
    btIsAdmin: Byte;
    nX: Integer;
    nY: Integer;
    nGold: Integer;
    dwExp: LongWord;
  end;
  pTHumanRcd = ^THumanRcd;

  TObjectFeature = record
    btGender: Byte;
    btWear: Byte;
    btHair: Byte;
    btWeapon: Byte;
  end;
  pTObjectFeature = ^TObjectFeature;

  TStatusInfo = record
    nStatus: Integer;
    dwStatusTime: LongWord;
    sm218: SmallInt;
    dwTime220: LongWord;
  end;

  TMsgHeader = record
    dwCode: LongWord;
    nSocket: Integer;
    wGSocketIdx: Word;
    wIdent: Word;
    wUserListIndex: Integer;
    nLength: Integer;
  end;
  pTMsgHeader = ^TMsgHeader;

  TUserInfo = record
    bo00: Boolean; //0x00
    bo01: Boolean; //0x01 ?
    bo02: Boolean; //0x02 ?
    bo03: Boolean; //0x03 ?
    n04: Integer; //0x0A ?
    n08: Integer; //0x0B ?
    bo0C: Boolean; //0x0C ?
    bo0D: Boolean; //0x0D
    bo0E: Boolean; //0x0E ?
    bo0F: Boolean; //0x0F ?
    n10: Integer; //0x10 ?
    n14: Integer; //0x14 ?
    n18: Integer; //0x18 ?
    sStr: string[20]; //0x1C
    nSocket: Integer; //0x34
    nGateIndex: Integer; //0x38
    n3C: Integer; //0x3C
    n40: Integer; //0x40 ?
    n44: Integer; //0x44
    List48: TList; //0x48
    Cert: TObject; //0x4C
    dwTime50: LongWord; //0x50
    bo54: Boolean; //0x54
  end;
  pTUserInfo = ^TUserInfo;

  TGlobaSessionInfo = record
    sAccount: string;//登录账号
    sIPaddr: string;//IP地址
    sSelChrName : string;
    nSessionID: Integer;//会话ID
    n24: Integer;
    bo28: Boolean;
    boLoadRcd: Boolean;//是否读取
    boStartPlay: Boolean;//是否开始游戏
    dwAddTick: LongWord;//加入列表的时间
    dAddDate: TDateTime;//加入列表的日期
  end;
  pTGlobaSessionInfo = ^TGlobaSessionInfo;

  TSellOffHeader = record
    nItemCount: Integer;
  end;
//------------------------------------------------------------------------------
  TBoxsInfo = record //宝箱数据结构 20090225 修改
    sBoxsID: Integer;//箱子文件ID
    nItemNum: LongWord;//物品数量
    nItemType: Byte;//物品类型(0-普通物品 1-填充物品 2-中间格物品)
    nItemRace: Word;//几率
    StdItem: TClientItem;//20110919
  end;
  pTBoxsInfo = ^TBoxsInfo;
//------------------------------------------------------------------------------
  TSuitItem = packed record //套装数据结构  20080225
    ItemCount: Byte; //套装物品数量
    Note: String[30];//说明
    Name: String;//物品名称
    MaxHP: DWord;//HP上限
    MaxMP: DWord;//MP上限
    DC: Word;//攻击力
    MaxDC: Word;
    MC: Word;//魔法
    MaxMC: Word;
    SC: Word;//道术
    MaxSC: Word;
    AC: Integer; //防御
    MaxAC: Integer;
    MAC: Word; //魔防
    MaxMAC: Word;
    HitPoint: Byte;//准确度
    SpeedPoint: Byte;//敏捷度
    HealthRecover: ShortInt; //体力恢复
    SpellRecover: ShortInt; //魔法恢复
    RiskRate: Integer; //幸运值
    btReserved: Byte; //吸血(虹吸)
    btReserved1: Byte; //减内力值
    btReserved2: Byte; //保留
    btReserved3: Byte; //保留
    nEXPRATE: Integer;//经验倍数
    nPowerRate: Byte;//攻击倍数
    nMagicRate: Byte;//魔法倍数
    nSCRate: Byte;//道术倍数
    nACRate: Byte;//防御倍数
    nMACRate: Byte;//魔御倍数
    nAntiMagic: ShortInt; //魔法躲避
    nAntiPoison: Byte; //毒物躲避
    nPoisonRecover: ShortInt; //中毒恢复
    boNewHPMPAdd : Boolean;//增加HPMP
    boTeleport : Boolean;//传送  20080824
    boParalysis : Boolean;//麻痹
    boRevival : Boolean;//复活
    boMagicShield : Boolean;//护身
    boUnParalysis : Boolean;//防麻痹
    nIncDragonRate: Byte;//合击伤害比例(增加) 20090330
    nIncNHRate: Byte;//内力恢复%(增加) 20090330
    boUnRevival : Boolean;//防复活
    boUnMagicShield : Boolean;//防护身
    nUnBurstRate: Byte;//防爆点
    nVampirePoint: Byte;//吸血点数(虎威装备)
    nCallTrollLevel: Byte;//召唤巨魔等级(传奇套装)
    nJob: Byte;//职业 0-战 1-法 2-道 3-不限职业
    nIncDragon: Word;//合击伤害点数(增加)
    nMasterAbility: Byte;//主属性
    boParalysis1 : Boolean;//战意麻痹
    boParalysis2 : Boolean;//魔道麻痹
    boParalysis3 : Boolean;//魔意麻痹
  end;
  pTSuitItem = ^TSuitItem;

  TClientSuitAbility = record//客户端套装属性值 20110711
    nMasterAbility: Byte;//主属性
    nIncDragon: Word;//合击伤害点数

    nShangHaiXiShou:Integer; // 其他的能力先弄这里。
    nGongJiSuDu:Integer;     // 攻击速度
    nGongJiXiXue:Integer;
    nQiangShenDengJi:Integer;
    nJuMoDengJi:Integer;
    nBaoJiDengJi:Integer;
    nNeiShangDengJi:Integer;
    nHeJiWeiLi:Integer;
    nBingDongKangXing:Integer;
  end;

//------------------------------------------------------------------------------
  TDealOffInfo = packed record //   元宝寄售数据结构  20080316
    sDealCharName: string[ACTORNAMELEN];//寄售人 *
    sBuyCharName: string[ACTORNAMELEN];//购买人
    dSellDateTime: TDateTime;//寄售时间
    nSellGold: Integer;//交易的元宝数
    UseItems: array[0..9] of TUserItem;//物品
    N: Byte;//交易识标 0-正常 1-购买,但寄售人未得到元宝 2-交易结束(得到元宝) 3-购买人取消 4-正在操作中
  end;
  pTDealOffInfo = ^TDealOffInfo;

  TClientDealOffInfo = packed record //客户端元宝寄售数据结构  20080317
    sDealCharName: string[ACTORNAMELEN];//寄售人
    sBuyCharName: string[ACTORNAMELEN];//购买人
    dSellDateTime: TDateTime;//寄售时间
    nSellGold: Integer;//交易的元宝数
    UseItems: array[0..9] of TClientItem;//物品 //20110919
    N: Byte;//交易识标
  end;
  pTClientDealOffInfo = ^TClientDealOffInfo;
//------------------------------------------------------------------------------
  TAttribute = record //淬炼极品属性
    nPoints: Byte;//最高限制升点数
    nDifficult: Byte;//淬炼难度
  end;


  TRefineItemInfo = packed record //Size 36 淬炼数据结构  20080502
    sItemName: string;//物品名称
    nRefineRate: Byte;//淬炼成功率
    nReductionRate: Byte;//失败还原率
    boDisappear: Boolean;//火云石是否消失 0-减少1持久,1-消失
    nNeedRate: Byte;//极品机率
    nAttribute: array[0..13] of TAttribute;//淬炼极品属性
  end;
  pTRefineItemInfo = ^TRefineItemInfo;

  TRefineDrumItemInfo = packed record // Size 36 淬炼军鼓(同时可以淬炼其他物品)数据结构  20080502
    GiveName:string; // 合成的物品名称
    MainItemName: string;// 主材料名称
    ItemNamesCount:Integer;
    ItemNames:array[0..5] of String;  // 辅助物品名称

    sPriceCount:Integer;
    sPriceType:array[0..5] of Char;  // 需要元宝，灵狐等等
    nPriceCounts:array[0..5] of Integer;  // 需要的数量

    SuccessRate: Byte;  //淬炼成功率
    FailRate:Byte;      //失败的时候，物品消失的几率
    boInherit: Boolean; //是否继承主材料的鉴定属性  By TasNat at: 2012-04-19 22:47:37
  end;
  pTRefineDrumItemInfo = ^TRefineDrumItemInfo;
//------------------------------------------------------------------------------
  TSellOffInfo = packed record //Size 59    拍卖数据结构
    sCharName: string[ACTORNAMELEN];//拍卖人
    dSellDateTime: TDateTime;//拍卖时间
    nSellGold: Integer;//金额
    N: Integer;
    UseItems: TUserItem;//物品
    n1: Integer;
  end;
  pTSellOffInfo = ^TSellOffInfo;

  TItemCount = Integer;//物品数量

  TBigStorage = packed record //无限仓库数据结构
    boDelete: Boolean;
    sCharName: string[ACTORNAMELEN];
    SaveDateTime: TDateTime;
    UseItems: TUserItem;
    nCount: Integer;
  end;
  pTBigStorage = ^TBigStorage;

  TBindItem = record //解包物品类
    sUnbindItemName: string[ACTORNAMELEN];//解包物品名称
    nStdMode: Integer;//物品分类
    nShape: Integer;//装配外观
    btItemType: Byte;//分类
  end;
  pTBindItem = ^TBindItem;

  TPulseInfo = packed record//人物脉穴类
    nPulsePoint: Byte;//穴位 0-表示没打通一个穴位，1，2，3，4，5,各表示打通到第几个穴位，5时表示脉已打通
    boOpenPulse: Boolean;//脉是否打通
    nPulseLevel: Byte;//脉等级(1-5级)
    nStormsHit: Byte;//爆击率
  end;

  THeroPulseInfo = packed record//英雄脉穴类
    nPulsePoint: Byte;//穴位 0-表示没打通一个穴位，1，2，3，4，5,各表示打通到第几个穴位，5时表示脉已打通
    boOpenPulse: Boolean;//脉是否打通
    nPulseLevel: Byte;//脉等级(1-5级)
    nStormsHit: Byte;//爆击率
    dwUpPulseLevelExp: LongWord;//修炼所需的经络经验
  end;

  TOUserStateInfo = packed record //OK
    feature: {Integer}TFeatures;
    UserName: string[15]; // 15
    GuildName: string[14]; //14
    GuildRankName: string[16]; //15
    NAMECOLOR: Word;
    UseItems: array[0..8] of TOClientItem;
  end;

  TIDRecordHeader = packed record
    boDeleted: Boolean;
    bt1: Byte;
    bt2: Byte;
    bt3: Byte;
    CreateDate: TDateTime;
    UpdateDate: TDateTime;
    sAccount: string[11];
  end;

  TRecordHeader = packed record //Size 28
    boDeleted: Boolean; //是否删除
    nSelectID: Byte;   //ID
    boIsHero: Boolean; //是否英雄
    bt2: Byte;
    dCreateDate: TDateTime; //最后登录时间
    sName: string[15]; //角色名称   28
  end;
  pTRecordHeader = ^TRecordHeader;

  TUseItemNames = array[0..14] of string[16];
  pTUseItemNames = ^TUseItemNames;//假人存物品名使用

  THumanUseItems = array[0..14] of TUserItem;//扩展支持斗笠 20080416

  THumTitles = array[0..7] of THumTitle;//人物称号 20110130
  TUnKnow1 = array[0..5] of Word;//预留6个Word变量 20110130

  TUnKnow = array[0..44] of Byte;//20100803
  TQuestFlag = array[0..127] of Byte;
  TStatusTime = array[0..MAX_STATUS_ATTRIBUTE - 1] of Word;

  THumItems = array[0..8] of TUserItem;//9格装备
  THumAddItems = array[9..14] of TUserItem;//新增4格装备 扩展支持斗笠 20080416
  TBagItems = array[0..45] of TUserItem;//包裹物品
  TStorageItems = array[0..45] of TUserItem;
  THumMagics = array[0..{29}34] of THumMagic;//人物技能 20110812 扩展********
  THumNGMagics = array[0..29] of THumNGMagic;//内功技能
  THumanPulseInfo = array[0..4] of TPulseInfo;//人物脉穴 0-3冲脉,阴跷,阴维,任脉 4奇经
  THeroPulseInfo1 = array[0..4] of THeroPulseInfo;//英雄脉穴
  PTPLAYUSEITEMS = ^THumanUseItems;

  pTHumItems = ^THumItems;
  pTBagItems = ^TBagItems;
  pTStorageItems = ^TStorageItems;
  pTHumAddItems = ^THumAddItems;
  pTHumMagics = ^THumMagics;
  pTHumNGMagics = ^THumNGMagics;//内功技能

  pTHumData = ^THumData;
  THumData = packed record //(称号系统)数据结构 20110130
    sChrName: string[ACTORNAMELEN];//姓名
    sCurMap: string[MAPNAMELEN];//地图
    wCurX: Word; //坐标X
    wCurY: Word; //坐标Y
    btDir: Byte; //方向
    btHair: Byte;//头发
    btSex: Byte; //性别(0-男 1-女)
    btJob: Byte;//职业 0-战 1-法 2-道 3-刺客
    nGold: Integer;//金币数(人物) 英雄怒气值(英雄)
    Abil: TOAbility;//+40 人物其它属性
    wStatusTimeArr: TStatusTime; //+24 人物状态属性值，一般是持续多少秒
    sHomeMap: string[MAPNAMELEN];//Home 家(主体),用于是否第一次召唤(英雄)
    wHomeX: Word;//Home X
    wHomeY: Word;//Home Y
    sDearName: string[ACTORNAMELEN]; //别名(配偶)
    sMasterName: string[ACTORNAMELEN];//人物-师傅名字 英雄-主体名字
    boMaster: Boolean;//是否有徒弟
    btCreditPoint: Integer;//声望点
    btDivorce: Byte; //(主体)喝酒时间,计算长时间没使用喝酒(btDivorce与UnKnow[25]组合成word)
    btMarryCount: Byte; //结婚次数
    sStoragePwd: string[7];//仓库密码
    btReLevel: Byte;//转生等级
    btUnKnow2: array[0..2] of Byte;//0-是否开通元宝寄售(1-开通) 1-是否寄存英雄(1-存有英雄) 2-饮酒时酒的品质
    BonusAbil: TNakedAbility; //+20 分配的属性值
    nBonusPoint: Integer;//奖励点
    nGameGold: Integer;//游戏币(元宝)
    nGameDiaMond: Integer;//金刚石
    nGameGird: Integer;//灵符
    nGamePoint: Integer;//游戏点
    btGameGlory: Integer; //荣誉
    nPayMentPoint: Integer; //充值点
    nLoyal: LongWord;//忠诚度(英雄) 主将累计经验(主体)
    nPKPOINT: Integer;//PK点数
    btAllowGroup: Byte;//允许组队
    btF9: Byte;
    btAttatckMode: Byte;//攻击模式
    btIncHealth: Byte;//增加健康数
    btIncSpell: Byte;//增加攻击点
    btIncHealing: Byte;//增加治愈点
    btFightZoneDieCount: Byte;//在行会占争地图中死亡次数
    sAccount: string[10];//登录帐号
    btHeroType: Byte;//英雄类型 0-白日门英雄 1-卧龙英雄 2-主将英雄 3-副将英雄
    boLockLogon: Boolean;//是否锁定登陆
    wContribution: Word;//贡献值(主体) 喝酒时间,计算长时间没使用喝酒(英雄)
    nHungerStatus: Integer;//饥饿状态(主体)
    boAllowGuildReCall: Boolean;//是否允许行会合一
    wGroupRcallTime: Word; //队传送时间
    dBodyLuck: Double; //幸运度  8
    boAllowGroupReCall: Boolean; //是否允许天地合一
    nEXPRATE: Integer; //经验倍数
    nExpTime: LongWord; //经验倍数时间
    btLastOutStatus: Byte; //退出状态 1为死亡退出
    wMasterCount: Word; //出师徒弟数
    boHasHero: Boolean; //是否有白日门英雄(主体使用)
    boIsHero: Boolean; //是否是英雄
    btStatus: Byte; //英雄状态(英雄) 所选副将职业(主体)
    sHeroChrName: string[ACTORNAMELEN];//英雄名称, size=15
    sHeroChrName1: string[ACTORNAMELEN];//卧龙英雄名(size=15) 20110130
    UnKnow: TUnKnow;//44: 0-3酿酒使用 4-饮酒时的度数 5-魔法盾等级 6-是否学过内功
                    //7-内功等级(1)
                    //8-使用物品改变说话的颜色
                    //9..16经络数据
                    //17..20命令增加的永久属性
                    //21是否学过连击技能
                    //22..24连击键设置(0-不处理 1-显示"?")
                    //25-英雄开通经络(英雄) (主体)喝酒时间
                    //26-是否学过护体神盾
                    //27-副将英雄是否自动修炼(主体)
                    //28-第四格连击键设置(0-不处理 1-显示"?")
                    //29-第四连击是否可用
                    //30-幸运值(制造神秘卷轴)
                    //31-精力值
                    //32-奇经(0-未学习 1-神冲 2-夹脊 3-二百 4-八风 5-涌泉)
                    //33-内功等级(2)
                    //34-死亡次数(称号使用)
                    //35-是否突破99级斗转
                    //36-龙卫心法类型
                    //37-无视麻痹剩余时间By TasNat at: 2012-04-23 18:49:20
    QuestFlag: TQuestFlag; //脚本变量
    HumItems: THumItems; //9格装备 衣服  武器  蜡烛 头盔 项链 手镯 手镯 戒指 戒指
    BagItems: TBagItems; //包裹装备
    HumMagics: THumMagics;//普通魔法
    StorageItems: TStorageItems;//仓库物品
    HumAddItems: THumAddItems;//新增4格 护身符 腰带 鞋子 宝石
    n_WinExp: LongWord;//累计经验
    n_UsesItemTick: Integer;//聚灵珠聚集时间
    nReserved: LongWord; //(人物)酿酒的时间,即还有多长时间可以取回酒 (英雄)经络修炼经验
    nReserved1: Integer; //当前药力值
    nReserved2: Integer; //药力值上限
    nReserved3: Integer; //使用药酒时间,计算长时间没使用药酒
    n_Reserved: Word;   //当前酒量值
    n_Reserved1: Word;  //酒量上限
    n_Reserved2: Word;  //当前醉酒度
    n_Reserved3: Word;  //药力值等级
    boReserved: Boolean; //是否请过酒 T-请过酒(主体)
    boReserved1: Boolean;//是否有卧龙英雄(主体)
    boReserved2: Boolean;//是否酿酒 T-正在酿酒 (主体)
    boReserved3: Boolean;//人是否喝酒醉了(主体)
    m_GiveDate: Integer;//人物领取行会酒泉日期(主体)
    MaxExp68: LongWord;//自动修炼累计时长(主体)
    nExpSkill69: Integer;//内功当前经验
    HumNGMagics: THumNGMagics;//内功技能
    HumTitles: THumTitles;//称号数据  20110130
    m_nReserved1: Word;//吸伤属性
    m_nReserved2: Word;//主将英雄等级(主体)
    m_nReserved3: Word;//副将英雄等级(主体)
    m_nReserved4: LongWord;//真视秘籍使用时间
    m_nReserved5: LongWord;//使用物品(玄绿,玄紫,玄褐)改变说话颜色的使用时间(主体)
    m_nReserved6: LongWord;//主将累计内功经验(主体)
    m_nReserved7: Word;//主将英雄内功等级(主体)
    m_nReserved8: Word;//副将英雄内功等级(主体)
    Proficiency: Word;//熟练度(制造神秘卷轴)
    Reserved2: Word;//人物排名(主体)
    Reserved3: Word;//当前精元值(主体)
    Reserved4: Word;//当前斗转值
    Exp68: LongWord;//人物初始精元值的日期
    sHeartName: String[12];//龙卫自定义心法名称 20110808
    SpiritMedia: TUserItem;//灵媒装备位
    UnKnow1: TUnKnow1;//预留6个Word变量  20110130
    Reserved5: LongWord;//游戏点清理日期
    Reserved6: LongWord;//预留变量2 20110812******
    Reserved7: LongWord;//预留变量3 20110812******
  end;
(*  THumData = packed record {人物数据类 Size = 5757 预留N个变量 20100804}
    sChrName: string[ACTORNAMELEN];//姓名
    sCurMap: string[MAPNAMELEN];//地图
    wCurX: Word; //坐标X
    wCurY: Word; //坐标Y
    btDir: Byte; //方向
    btHair: Byte;//头发
    btSex: Byte; //性别(0-男 1-女)
    btJob: Byte;//职业 0-战 1-法 2-道 3-刺客
    nGold: Integer;//金币数(人物) 英雄怒气值(英雄)
    Abil: TOAbility;//+40 人物其它属性
    wStatusTimeArr: TStatusTime; //+24 人物状态属性值，一般是持续多少秒
    sHomeMap: string[MAPNAMELEN];//Home 家(主体),用于是否第一次召唤(英雄)
    wHomeX: Word;//Home X
    wHomeY: Word;//Home Y
    sDearName: string[ACTORNAMELEN]; //别名(配偶)
    sMasterName: string[ACTORNAMELEN];//人物-师傅名字 英雄-主体名字
    boMaster: Boolean;//是否有徒弟
    btCreditPoint: Integer;//声望点
    btDivorce: Byte; //(主体)喝酒时间,计算长时间没使用喝酒(btDivorce与UnKnow[25]组合成word)
    btMarryCount: Byte; //结婚次数
    sStoragePwd: string[7];//仓库密码
    btReLevel: Byte;//转生等级
    btUnKnow2: array[0..2] of Byte;//0-是否开通元宝寄售(1-开通) 1-是否寄存英雄(1-存有英雄) 2-饮酒时酒的品质
    BonusAbil: TNakedAbility; //+20 分配的属性值
    nBonusPoint: Integer;//奖励点
    nGameGold: Integer;//游戏币
    nGameDiaMond: Integer;//金刚石
    nGameGird: Integer;//灵符
    nGamePoint: Integer;//声望
    btGameGlory: Integer; //荣誉
    nPayMentPoint: Integer; //充值点
    nLoyal: LongWord;//忠诚度(英雄) 主将累计经验(主体)
    nPKPOINT: Integer;//PK点数
    btAllowGroup: Byte;//允许组队
    btF9: Byte;
    btAttatckMode: Byte;//攻击模式
    btIncHealth: Byte;//增加健康数
    btIncSpell: Byte;//增加攻击点
    btIncHealing: Byte;//增加治愈点
    btFightZoneDieCount: Byte;//在行会占争地图中死亡次数
    sAccount: string[10];//登录帐号
    btEF: Byte;//英雄类型 0-白日门英雄 1-卧龙英雄 2-主将英雄 3-副将英雄
    boLockLogon: Boolean;//是否锁定登陆
    wContribution: Word;//贡献值(主体) 喝酒时间,计算长时间没使用喝酒(英雄)
    nHungerStatus: Integer;//饥饿状态(主体)
    boAllowGuildReCall: Boolean;//是否允许行会合一
    wGroupRcallTime: Word; //队传送时间
    dBodyLuck: Double; //幸运度  8
    boAllowGroupReCall: Boolean; //是否允许天地合一
    nEXPRATE: Integer; //经验倍数
    nExpTime: LongWord; //经验倍数时间
    btLastOutStatus: Byte; //退出状态 1为死亡退出
    wMasterCount: Word; //出师徒弟数
    boHasHero: Boolean; //是否有白日门英雄(主体使用)
    boIsHero: Boolean; //是否是英雄
    btStatus: Byte; //英雄状态(英雄) 所选副将职业(主体)
    sHeroChrName: string[ACTORNAMELEN];//英雄名称, size=15
    UnKnow: TUnKnow;//0-3酿酒使用 4-饮酒时的度数 5-魔法盾等级 6-是否学过内功
                    //7-内功等级(1) 8-使用物品改变说话的颜色  9..16经络数据 17..20命令增加的永久属性
                    //21是否学过连击技能 22..24连击键设置(0-不处理 1-显示"?") 25-英雄开通经络(英雄) (主体)喝酒时间
                    //26-是否学过护体神盾 27-副将英雄是否自动修炼(主体) 28-第四格连击键设置(0-不处理 1-显示"?")
                    //29-第四连击是否可用 30-幸运值(制造神秘卷轴) 31-精力值 32-奇经(0-未学习 1-神冲 2-夹脊 3-二百 4-八风 5-涌泉)
                    //33-内功等级(2)
    QuestFlag: TQuestFlag; //脚本变量
    HumItems: THumItems; //9格装备 衣服  武器  蜡烛 头盔 项链 手镯 手镯 戒指 戒指
    BagItems: TBagItems; //包裹装备
    HumMagics: THumMagics;//普通魔法
    StorageItems: TStorageItems;//仓库物品
    HumAddItems: THumAddItems;//新增4格 护身符 腰带 鞋子 宝石
    n_WinExp: LongWord;//累计经验
    n_UsesItemTick: Integer;//聚灵珠聚集时间
    nReserved: LongWord; //(人物)酿酒的时间,即还有多长时间可以取回酒 (英雄)经络修炼经验
    nReserved1: Integer; //当前药力值
    nReserved2: Integer; //药力值上限
    nReserved3: Integer; //使用药酒时间,计算长时间没使用药酒
    n_Reserved: Word;   //当前酒量值
    n_Reserved1: Word;  //酒量上限
    n_Reserved2: Word;  //当前醉酒度
    n_Reserved3: Word;  //药力值等级
    boReserved: Boolean; //是否请过酒 T-请过酒(主体)
    boReserved1: Boolean;//是否有卧龙英雄(主体)
    boReserved2: Boolean;//是否酿酒 T-正在酿酒 (主体)
    boReserved3: Boolean;//人是否喝酒醉了(主体)
    m_GiveDate: Integer;//人物领取行会酒泉日期(主体)
    MaxExp68: LongWord;//自动修炼累计时长(主体)
    nExpSkill69: Integer;//内功当前经验
    HumNGMagics: THumNGMagics;//内功技能
    m_nReserved1: Word;//吸伤属性
    m_nReserved2: Word;//主将英雄等级(主体)
    m_nReserved3: Word;//副将英雄等级(主体)
    m_nReserved4: LongWord;//真视秘籍使用时间
    m_nReserved5: LongWord;//使用物品(玄绿,玄紫,玄褐)改变说话颜色的使用时间(主体)
    m_nReserved6: LongWord;//主将累计内功经验(主体)
    m_nReserved7: Word;//主将英雄内功等级(主体)
    m_nReserved8: Word;//副将英雄内功等级(主体)
    Proficiency: Word;//熟练度(制造神秘卷轴)
    Reserved2: Word;//人物排名(主体) 20101025
    Reserved3: Word;//当前精元值(主体)
    Reserved4: Word;//当前斗转值
    Exp68: LongWord;//人物初始精元值的日期
    Reserved5: LongWord;//预留变量5
    Reserved6: LongWord;//预留变量6
    Reserved7: LongWord;//预留变量7
    Reserved8: Byte;//预留变量8
    SpiritMedia: TUserItem;//灵媒装备位
  end;  *)
  
  //当BUFFERSIZE = 10000;时,THumDataInfo最大为7498,超过则影响数据保存,无法进入 20110131
  THumDataInfo = packed record //Size 6940(20110130) 7124(20110812)
    Header: TRecordHeader;
    Data: THumData;
  end;
  pTHumDataInfo = ^THumDataInfo;
//-------------------副将英雄数据结构HeroMir.db---------------------------------
  TNewHeroData = packed record {副将数据类 Size = 2425}
    sHeroChrName: string[ACTORNAMELEN];//英雄名称
    btJob: Byte;//职业 0-战 1-法 2-道 3-刺客
    nHP: Integer;//当前HP值
    nMP: Integer;//当前MP值
    HumItems: THumItems; //9格装备 衣服  武器  蜡烛 头盔 项链 手镯 手镯 戒指 戒指
    HumAddItems: THumAddItems;//新增4格 护身符 腰带 鞋子 宝石
    BagItems: TBagItems; //包裹装备
    HumMagics: THumMagics;//普通魔法
    HumNGMagics: THumNGMagics;//内功技能
  end;
  pTNewHeroData = ^TNewHeroData;

  TNewHeroDataHeader = packed record
    boDeleted: Boolean; //是否删除
    dCreateDate: TDateTime; //最后登录时间
  end;
  pTNewHeroDataHeader = ^TNewHeroDataHeader;

  TNewHeroDataInfo = packed record
    Header: TNewHeroDataHeader;
    Data: TNewHeroData;
  end;
  pTNewHeroDataInfo = ^TNewHeroDataInfo;
//--------------------HumHero.db使用结构(称号系统注释)----------------------------------------
{  TNewHeroName = record //副将英雄名字
    sChrName: string[ACTORNAMELEN];//主体名字
    sNewHeroName: string[ACTORNAMELEN];//副将名字
  end;
  pTNewHeroName = ^TNewHeroName;

  THeroNameInfo = packed record
    Header: TNewHeroDataHeader;
    Data: TNewHeroName;
  end;
  pTHeroNameInfo = ^THeroNameInfo;   }
//------------------------------------------------------------------------------
  THeroDataInfo = packed record //查询英雄数据(酒馆)
    sChrName: string[ACTORNAMELEN];//姓名
    Level: Word; //等级
    btSex: Byte; //性别
    btJob: Byte;//职业 0-战 1-法 2-道 3-刺客
    btType: Byte;//英雄类型 0-白日门英雄 1-卧龙英雄
  end;
  pTHeroDataInfo = ^THeroDataInfo;

  TSaveRcd = record
    sAccount: string[12];//账号
    sChrName: string[ACTORNAMELEN];//名字
    nSessionID: Integer;//会话ID
    nReTryCount: Integer;//保存失败计数
    dwSaveTick: LongWord;//保存错误下次保存TICK
    PlayObject: TObject;
    HumanRcd: THumDataInfo;//数据包
    boIsNewHero: Boolean;//是否副将
    NewHeroDataInfo: TNewHeroDataInfo;//副将数据
    boIsHero: Boolean;//是否英雄
    boSaveing: Boolean;//正在保存中
  end;
  pTSaveRcd = ^TSaveRcd;

  TLoadDBInfo = record
    sAccount: string[12];//账号
    sCharName: string[ACTORNAMELEN];//角色名称
    sIPaddr: string[15];//IP地址
    dwHCode: DWord; // 硬件码
    sMsg: string;
    nSessionID: Integer;//会话ID
    nSoftVersionDate: Integer;//客户端版本号
    nPayMent: Integer;
    nPayMode: Integer;//玩家模式 
    nSocket: Integer;//端口
    nGSocketIdx: Integer;
    nGateIdx: Integer;
    boClinetFlag: Boolean;
    dwNewUserTick: LongWord;
    PlayObject: TObject;
    nReLoadCount: Integer;//读取错误计数
    boIsHero: Boolean;//是否英雄
    btLoadDBType: Byte;//读取类型 0-召唤英雄 1-新建英雄 2-删除英雄 3-查询数据(取回英雄) 4-评定英雄取数据
    M2isCreate: Boolean;//20090318 是否M2直接创建
    wRandomKey: Word;//随机密钥 20091026
    boIsNewHero: boolean;//是否副将
    nJob: Byte;//副将职业 0-战 1-法 2-道 3-刺客    
  end;
  pTLoadDBInfo = ^TLoadDBInfo;

  TUserOpenInfo = record
    sAccount: string[12];
    sChrName: string[ACTORNAMELEN];
    LoadUser: TLoadDBInfo;
    HumanRcd: THumDataInfo;
    nOpenStatus: Integer;
    NewHeroDataInfo: TNewHeroDataInfo;//副将数据
  end;
  pTUserOpenInfo = ^TUserOpenInfo;

  TLoadUser = record
    sAccount: string[12];
    sChrName: string[ACTORNAMELEN];
    sIPaddr: string[15];
    nSessionID: Integer;
    nSocket: Integer;
    nGateIdx: Integer;
    nGSocketIdx: Integer;
    nPayMent: Integer;
    nPayMode: Integer;
    dwNewUserTick: LongWord;
    nSoftVersionDate: Integer;
  end;
  pTLoadUser = ^TLoadUser;

  TUserStateInfo = record
    feature: {Integer}TFeatures;
    UserName: string[ACTORNAMELEN];
    NAMECOLOR: Integer;
    GuildName: string[ACTORNAMELEN];
    GuildRankName: string[16];
    //UseItems: array[0..13] of TClientItem;//20080417 支持斗笠,0..12改0..13
    UseItems: array[0..14] of TClientItem;//20110912 加入物品特效
    btJob: Byte;//职业 20110113
    {$IF M2Version <> 2}
    wHumTitles: TClientHumTitles;//称号
    nCallTrollLevel: Byte;//召唤巨魔等级
    {$IFEND}
    SuitAbility: TClientSuitAbility;//套装属性值 20110711
  end;
  pTUserStateInfo = ^TUserStateInfo;

  TDoorStatus = record
    bo01: Boolean;
    boOpened: Boolean;
    dwOpenTick: LongWord;
    nRefCount: Integer;
    n04: Integer;
  end;
  pTDoorStatus = ^TDoorStatus;

  TDoorInfo = record
    nX: Integer;
    nY: Integer;
    n08: Integer;
    Status: pTDoorStatus;
  end;
  pTDoorInfo = ^TDoorInfo;

  TSlaveInfo = record
    sSalveName: string;
    btSalveLevel: Byte;
    btSlaveExpLevel: Byte;
    dwRoyaltySec: LongWord;
    nKillCount: Integer;
    nHP: Integer;
    nMP: Integer;
  end;
  pTSlaveInfo = ^TSlaveInfo;

  TSwitchDataInfo = record
    sChrName: string[ACTORNAMELEN];
    sMAP: string[MAPNAMELEN];
    wX: Word;
    wY: Word;
    Abil: TAbility;
    nCode: Integer;
    boC70: Boolean;//未使用
    boBanShout: Boolean;
    boHearWhisper: Boolean;
    boBanGuildChat: Boolean;
    boAdminMode: Boolean;
    boObMode: Boolean;
    BlockWhisperArr: array[0..5] of string;
    SlaveArr: array[0..10] of TSlaveInfo;
    StatusValue: array[0..5] of Word;
    StatusTimeOut: array[0..5] of LongWord;
  end;
  pTSwitchDataInfo = ^TSwitchDataInfo;

  TGoldChangeInfo = record
    sGameMasterName: string;//游戏玩家名字
    sGetGoldUser: string;
    nGold: Integer;
  end;
  pTGoldChangeInfo = ^TGoldChangeInfo;


  TStartPoint = record //安全区回城点 增加光环效果
    m_sMapName: string[MAPNAMELEN];//地图
    m_nCurrX: Integer; //座标X(4字节)
    m_nCurrY: Integer; //座标Y(4字节)
    m_boNotAllowSay: Boolean;//不允许说话 未使用
    m_nRange: Integer;//范围
    m_nType: Integer;//类型
  end;
  pTStartPoint = ^TStartPoint;

  TFindRout = record //寻路目标
    m_sMapName: string[MAPNAMELEN];//地图
    m_nCurrX: Integer; //座标X(4字节)
    m_nCurrY: Integer; //座标Y(4字节)
  end;
  pTFindRout = ^TFindRout;

  //地图事件数据配置详解
  TQuestUnitStatus = record
    nQuestUnit: Integer;
    boOpen: Boolean;
  end;
  pTQuestUnitStatus = ^TQuestUnitStatus;

  TMapCondition = record
    nHumStatus: Integer;//人的状态
    sItemName: string[14*2];//物品
    boNeedGroup: Boolean;//是否需要组队
  end;
  pTMapCondition = ^TMapCondition;

  TStartScript = record
    nLable: Integer;
    sLable: string[100];
  end;

  TMapEvent = record
    m_sMapName: string[MAPNAMELEN];//地图
    m_nCurrX: Integer;//X
    m_nCurrY: Integer;//Y
    m_nRange: Integer;//范围
    m_MapFlag: TQuestUnitStatus;
    m_nRandomCount: Integer; //机率(0 - 999999) 0 的机率为100% ; 数字越大，机率越低
    m_Condition: TMapCondition; //触发条件
    m_StartScript: TStartScript;
  end;
  pTMapEvent = ^TMapEvent;

  TItemEvent = record
    m_sItemName: string[ACTORNAMELEN];
    m_nMakeIndex: Integer;
    m_sMapName: string[MAPNAMELEN];
    m_nCurrX: Integer;
    m_nCurrY: Integer;
  end;
  pTItemEvent = ^TItemEvent;

  TSendUserData = record
    nSocketIndx: Integer;
    nSocketHandle: Integer;
    sMsg: string;
  end;
  pTSendUserData = ^TSendUserData;

 { TCheckVersion = record
  end;
  pTCheckVersion = ^TCheckVersion;   }//20110220注释

  TRecordDeletedHeader = packed record
    boDeleted: Boolean;
    bt1: Byte;
    bt2: Byte;
    bt3: Byte;
    CreateDate: TDateTime;
    LastLoginDate: TDateTime;
    n14: Integer;
    nNextDeletedIdx: Integer;
    //    sAccount   :String[11];//0x14
  end;

  TUserEntry = packed record
    sAccount: string[10];//账号
    sPassword: string[10];//密码
    sUserName: string[20];//用户名称
    sSSNo: string[14];//身份证
    sPhone: string[14];//电话
    sQuiz: string[20];//问题1
    sAnswer: string[12];//答案1
    sEMail: string[40];//邮箱
  end;
  TUserEntryAdd = packed record
    sQuiz2: string[20];//问题2
    sAnswer2: string[12];//答案2
    sBirthDay: string[10];//生日
    sMobilePhone: string[13];//移动电话
    sMemo: string[20];//备注一
    sMemo2: string[20];//备注二
  end;

  TAccountDBRecord = packed record
    Header: TIDRecordHeader;
    UserEntry: TUserEntry;
    UserEntryAdd: TUserEntryAdd;
    nErrorCount: Integer;
    dwActionTick: LongWord;
    N: array[0..38] of Byte;
  end;

  TMapFlag = record //地图参数
    boSAFE: Boolean;//安全区
    boSAFENORUN: Boolean;//安全区人物不能穿
    boSAFEHERONORUN: Boolean;//英雄安全区不能穿 20090525
    boDARK: Boolean;//免蜡
    boFIGHT: Boolean;
    boFIGHT2: Boolean;//新PK地图，可以pk，但掉装备 20080525
    boFIGHT3: Boolean;
    boFIGHT4: Boolean;//挑战地图 20080706
    boFIGHT5: Boolean;//不同行会名字变不同颜色 20090318
    boNoFIGHT4: Boolean;//禁止挑战地图
    boDAY: Boolean;
    boQUIZ: Boolean;
    boNORECONNECT: Boolean;
    boMUSIC: Boolean;
    boEXPRATE: Boolean;
    boCRIT: Boolean;
    nCRIT: Integer;
    
    boPeak: Boolean;//巅峰状态(提高攻击倍率)
    nPeakMinRate: Integer;//最低攻击倍率
    nPeakMaxRate: Integer;//最高攻击倍率

    boPKWINLEVEL: Boolean;
    boPKWINEXP: Boolean;
    boPKLOSTLEVEL: Boolean;
    boPKLOSTEXP: Boolean;
    boDECHP: Boolean;
    boINCHP: Boolean;
    boDECGAMEGOLD: Boolean;
    boDECGAMEPOINT: Boolean;//自动减游戏点
    boINCGAMEGOLD: Boolean;
    boINCGAMEPOINT: Boolean;//自动加游戏点
    boNoCALLHERO: Boolean;//禁止召唤英雄 20080124
    
    boNEEDLEVELTIME: Boolean;//雪域地图传送,判断等级,地图时间 20081228
    nNEEDLEVELPOINT: Integer;//进雪域地图最低等级
    boMoveToHome: Boolean;//是否需倒计时传送到指定点(雪域) 20081230
    sMoveToHomeMap: string;//传送的地图名
    nMoveToHomeX : Integer;//传送的地图X
    nMoveToHomeY : Integer;//传送的地图Y

    boDECEXPRATETIME: Boolean;//减双倍经验时间 20090206
    nDECEXPRATETIME: Integer;//每次减双倍经验的值 20090206

    boPULSEXPRATE: Boolean;//地图杀怪英雄经验倍数 20091029
    nPULSEXPRATE: Integer;//地图杀怪英雄经验倍数 20091029
    boNGEXPRATE: Boolean;//地图杀怪内功经验倍数 20091029
    nNGEXPRATE: Integer;//地图杀怪内功经验倍数 20091029

    boNOHEROPROTECT: Boolean;//禁止英雄守护 20080629
    boNODROPITEM: Boolean;//禁止死亡掉物品 20080503
    boMISSION: Boolean;//不允许使用任何物品和技能 20080124
    boNOSKILL: Boolean;//不允许使用任何技能且下属死亡，英雄收回
    boRUNHUMAN: Boolean;
    boRUNMON: Boolean;
    boNEEDHOLE: Boolean;
    boNORECALL: Boolean;
    boNOGUILDRECALL: Boolean;
    boNODEARRECALL: Boolean;
    boNOMASTERRECALL: Boolean;
    boNORANDOMMOVE: Boolean;
    boNODRUG: Boolean;
    boMINE: Boolean;
    boNOPOSITIONMOVE: Boolean;
    boNoManNoMon: Boolean;//智能刷怪,有人才重新刷怪 20080525
    boKILLFUNC: Boolean;//地图杀人触发 20080415
    nKILLFUNC: Integer;//地图杀人触发 20080415 

    nNEEDSETONFlag: Integer;
    nNeedONOFF: Integer;
    nMUSICID: Integer;

    nPKWINLEVEL: Integer;
    nEXPRATE: Integer;
    nPKWINEXP: Integer;
    nPKLOSTLEVEL: Integer;
    nPKLOSTEXP: Integer;
    nDECHPPOINT: Integer;
    nDECHPTIME: Integer;
    nINCHPPOINT: Integer;
    nINCHPTIME: Integer;
    nDECGAMEGOLD: Integer;
    nDECGAMEGOLDTIME: Integer;
    nDECGAMEPOINT: Integer;
    nDECGAMEPOINTTIME: Integer;
    nINCGAMEGOLD: Integer;
    nINCGAMEGOLDTIME: Integer;
    nINCGAMEPOINT: Integer;
    nINCGAMEPOINTTIME: Integer;
    boHitMon: Boolean;//攻击怪触发 20110114
    sHitMonScript: string;
    sReConnectMap: string;
    sMUSICName: string;
    boUnAllowStdItems: Boolean;
    sUnAllowStdItemsText: string;//地图禁用物品
    boChangMapDrops: Boolean;//换地图掉指定物品
    sChangMapDropsText: string;
    sUnAllowMagicText: string; //不允许魔法
    boNOTALLOWUSEMAGIC: Boolean; //不允许魔法
    boAutoMakeMonster: Boolean;
    boFIGHTPK: Boolean; //PK可以爆装备不红名
    nThunder:Integer;//闪电 20080327
    nLava:Integer;//地上冒岩浆 20080327
    boSHOP:Boolean;//个人商店地图
    boDigJewel: Boolean;//挖宝
    boLimitLevel: Boolean;//当角色超过指定等级1时，按等级2值计算HP MP 地图参数
    nLimitLevel1: Integer;//指定等级1
    nLimitLevel2: Integer;//指定等级2
    nLimitLevelHero: Integer;//指定英雄等级
    nLimitLevelHero1: Integer;//指定英雄等级
  end;
  pTMapFlag = ^TMapFlag;

  TOrders = record
    sName      : String[ACTORNAMELEN];
    sHeroName  : String[ACTORNAMELEN];
    nLevel     : Integer;
    nExp       : LongWord;
    nMaster    : Integer;
    nHeartLevel: Byte;//心法等级 20111007
  end;
  pTOrders = ^TOrders;

  TUserLevelSort = record //人物等级排行
    nIndex: Integer;
    wLevel: Word;
    sChrName: string[ACTORNAMELEN];
    nHeartLevel: Byte;//心法等级 20111007
  end;
  pTUserLevelSort = ^TUserLevelSort;

  THeroLevelSort = record //英雄等级排行
    nIndex: Integer;
    wLevel: Word;
    sChrName: string[ACTORNAMELEN];
    sHeroName: string[ACTORNAMELEN];
  end;
  pTHeroLevelSort = ^THeroLevelSort;

  THumList  = Array[0..MAXORDERSCOUNT-1] of TUserLevelSort;
  THeroList = Array[0..MAXORDERSCOUNT-1] of THeroLevelSort;

  THumSort = record
    nUpDate : TDateTime;
    nMaxIdx : Integer;
    List    : THumList;
  end;
  THeroSort = record
    nUpDate : TDateTime;
    nMaxIdx : Integer;
    List    : THeroList;
  end;

  TCharName = string[ACTORNAMELEN + 1];
  pTCharName = ^TCharName;

  THeroName = string[ACTORNAMELEN * 2 + 2];
  pTHeroName = ^THeroName;
{$IF M2Version <> 2}
  TItemLevelSort = record//物品排行
    nIndex: Word;//名次
    wLevel: Word;//评分
    sChrName: string[ACTORNAMELEN];//拥有者
    Item: TClientItem;//物品数据
  end;
  pTItemLevelSort = ^TItemLevelSort;
{$IFEND}  
  TChrMsg = record
    Ident: Integer;
    x: Integer;
    y: Integer;
    dir: Integer;
    State: Integer;
    feature: Integer;
    saying: string;
    sound: Integer;
    NewFeature: TFeatures;
  end;
  pTChrMsg = ^TChrMsg;

 { TRegInfo = record//20110220 注释
    sKey: string;
    sServerName: string;
    sRegSrvIP: string[15];
    nRegPort: Integer;
  end; }

  TDropItem = record
    x: Integer;
    y: Integer;
    id: Integer;
    Looks: Integer;
    Name: string;
    FlashTime: DWord;
    FlashStepTime: DWord;
    FlashStep: Integer;
    BoFlash: Boolean;
  end;
  pTDropItem = ^TDropItem;

  TUserCharacterInfo = record
    Name: string[19];
    Job: Byte;
    HAIR: Byte;
    Level: Word;
    sex: Byte;
  end;

  TClientGoods = record
    Name: string;
    SubMenu: Integer;
    Price: Integer;
    Stock: Integer;
    Grade: Integer;
  end;
  PTClientGoods = ^TClientGoods;   

  TClientConf = record
    boRUNHUMAN: Boolean;
    boRUNMON: Boolean;
    boRunNpc: Boolean;
    boWarRunAll: Boolean;
    btDieColor: Byte;
    wSpellTime: Word;
    wHitIime: Word;
    wItemFlashTime: Word;
    btItemSpeed: Byte;//装备加速
    boParalyCanRun: Boolean;//麻痹能跑
    boParalyCanWalk: Boolean;//麻痹能走
    boParalyCanHit: Boolean;//麻痹能攻击
    boParalyCanSpell: Boolean;//麻痹能魔法
    boShowJobLevel: Boolean;
    boDuraAlert: Boolean;
    boSkill31Effect: Boolean;//魔法盾效果 T-特色效果 F-盛大效果 20080808
    boCanShop: Boolean;//开启商铺 20100630
    boShopUseGold: Boolean;//商铺使用金币交易 20100630
    boUsePlayShop: Boolean;//是否开放个人商店 20100706
    boNoUseProtection: Boolean;//内挂禁用主体保护
    boNoUseHeroProtection: Boolean;//内挂禁用英雄保护
    boNoCanUseComparThrust: Boolean;//内挂隔位刺杀是否可用
    boUseCanDivision: Boolean;//师门是否可用
    boShowMoveHP:Boolean;
    {$IF M2Version = 2}
    boShowNewItem:Boolean;//1.76是否显示四格By TasNat at: 2012-10-20 10:13:42
    {$ifend}
    {$IF M2Version = 0}
    boUses176StateWin:Boolean;//合击使用老F10界面By TasNat at: 2012-10-29 11:07:26
    {$ifend}
    dwMaxLevel : DWord;
  end;

 { pTPowerBlock = ^TPowerBlock;      //20110222 注释
  TPowerBlock = array[0..100 - 1] of Word; }

  TShowRemoteMessage = record
    btMessageType: Byte;
    boShow: Boolean;
    BeginDateTime: TDateTime;
    EndDateTime: TDateTime;
    dwShowTime: LongWord;
    dwShowTick: LongWord;
    boSuperUserShow: Boolean;
    sMsg: string;
  end;
  pTShowRemoteMessage = ^TShowRemoteMessage;

  TDisallowInfo = record //禁止物品规则 20080418
    boDrop: Boolean; //丢弃
    boDeal: Boolean; //交易
    boStorage: Boolean; //存仓
    boRepair: Boolean;  //修理
    boDropHint: Boolean; //掉落提示
    boOpenBoxsHint: Boolean; //宝箱提示
    boNoDropItem: Boolean; //永不爆出
    boButchHint: Boolean; //挖取提示
    boHeroUse: Boolean; //禁止英雄使用
    boPickUpItem: Boolean;//禁止捡起(除GM外)
    boDieDropItems: Boolean;//死亡掉落
    boBuyShopItemGive: Boolean;//禁止商铺赠送
    boButchItem: Boolean;//禁止挖
    boRefineItem: Boolean;//淬练提示
    boNpcGiveItem: Boolean;//一定时间才能捡起
    boCanDigJewelHint: Boolean;//挖宝提示
    bo24HourDisap: Boolean;//24时后消失
    boPermanentBind: Boolean;//永久绑定
    bo48HourUnBind: Boolean;//绑定48时
  end;
  pTDisallowInfo = ^TDisallowInfo;

  TCheckItem = packed record
    szItemName: string[14*2];
    boCanDrop: Boolean;
    boCanDeal: Boolean;
    boCanStorage: Boolean;
    boCanRepair: Boolean;
    boCanDropHint: Boolean;
    boCanOpenBoxsHint: Boolean;
    boCanNoDropItem: Boolean;
    boCanButchHint: Boolean;
    boCanHeroUse: Boolean; //禁止英雄使用
    boPickUpItem: Boolean;//禁止捡起(除GM外)
    boDieDropItems: Boolean;//死亡掉落
    boBuyShopItemGive: Boolean;//禁止商铺赠送
    boButchItem: Boolean;//禁止挖
    boRefineItem: Boolean;//淬练提示
    boNpcGiveItem: Boolean;//一定时间才能捡起
    boCanDigJewelHint: Boolean;//挖宝提示
    bo24HourDisap: Boolean;//24时后消失
    boPermanentBind: Boolean;//永久绑定
    bo48HourUnBind: Boolean;//绑定48时
  end;
  pTCheckItem = ^TCheckItem;
  
  TFilterMsg = record//消息过滤
    sFilterMsg: string[100];
    sNewMsg: string[100];
  end;
  pTFilterMsg = ^TFilterMsg;

  TagMapInfo = record //记路标石 20081019
    TagMapName: String[MAPNAMELEN];
    TagX: Integer;
    TagY: Integer;
  end;
  TagMapInfos = array[1..6] of TagMapInfo;//记路标石 20081019

  TClientShopItem = packed record//个人商店数据
    nItemIdx: Integer;//物品制造ID
    nPic: Integer;//价格
    boCls : Boolean;//T-元宝 F-金币
  end;

  TUserShopItem = record
    Item: Integer;//物品制造ID
    nPic: Integer;//价格
    boCls: Boolean;//T-元宝 F-金币
  end;
  pTUserShopItem = ^TUserShopItem;

  TShopItem = packed record//个人商店物品
    Item: TClientItem;//20110919
    nPic: Integer;//价格
    boCls: Boolean;//T-元宝 F-金币
  end;

  TMapWalkXY = record
    nWalkStep: Integer;//走步长
    nMonCount: Integer;//怪数量
    nMonRange: Integer;//怪范围
    nMastrRange: Integer;//主体范围
    nX: Integer;
    nY: Integer;
  end;
  pTMapWalkXY = ^TMapWalkXY;
  TWalkStep = array[0..7] of TMapWalkXY;
  pTWalkStep = ^TWalkStep;

  TRunPos = record
    btDirection: Byte; //1顺时针 2逆时针
    nAttackCount: Integer;
  end;
  pTRunPos = ^TRunPos;   

function APPRfeature(cfeature: Integer): Word;
function RACEfeature(cfeature: Integer): Byte;
function HAIRfeature(cfeature: Integer): Byte;
function DRESSfeature(cfeature: Integer): Byte;
function WEAPONfeature(cfeature: Integer): Byte;
function Horsefeature(cfeature: Integer): Byte;
function Effectfeature(cfeature: Integer): Byte;
function MakeHumanFeature(btRaceImg, btDress, btWeapon, btHair: Byte): Integer;
function MakeMonsterFeature(btRaceImg, btWeapon: Byte; wAppr: Word): Integer;
function aa(const Value,key:Word):Word;
function bb(const Value,key:Word):Word;

function EncodeExp(nExp,nExpMax : Int64) : string;

implementation
uses
  EDcode;

function EncodeExp(nExp,nExpMax : Int64) : string;
var
  ExpData : TExpData;
begin
  ExpData.nMaxExp := nExpMax;
  ExpData.nExp := nExp;
  Result := EncodeBuffer(@ExpData, SizeOf(ExpData));
end;

{$IF M2Version <> 2}
//消息ID加密
function aa(const Value,key:Word):Word;
begin
  Result:=(Value+(key shl 3)) xor (key shr 1);
end;
//消息ID解密
function bb(const Value,key:Word):Word;
begin
  Result:= (Value xor (key shr 1)) - (key shl 3);
end;
{$ELSE}
//消息ID加密
function aa(const Value,key:Word):Word;
begin
  Result:=(Value+(key shl 6)) xor (key shr 2);
end;
//消息ID解密
function bb(const Value,key:Word):Word;
begin
  Result:= (Value xor (key shr 2)) - (key shl 6);
end;
{$IFEND}
function WEAPONfeature(cfeature: Integer): Byte;
begin
  Result := HiByte(cfeature);
end;
function DRESSfeature(cfeature: Integer): Byte;
begin
  Result := HiByte(HiWord(cfeature));
end;
function APPRfeature(cfeature: Integer): Word;
begin
  Result := HiWord(cfeature);
end;
function HAIRfeature(cfeature: Integer): Byte;
begin
  Result := HiWord(cfeature);
end;

function RACEfeature(cfeature: Integer): Byte;
begin
  Result := cfeature;
end;

function Horsefeature(cfeature: Integer): Byte;
begin
  Result := LoByte(LoWord(cfeature));
end;
function Effectfeature(cfeature: Integer): Byte;
begin
  Result := HiByte(LoWord(cfeature));
end;

function MakeHumanFeature(btRaceImg, btDress, btWeapon, btHair: Byte): Integer;
begin
  Result := MakeLong(MakeWord(btRaceImg, btWeapon), MakeWord(btHair, btDress));
end;
function MakeMonsterFeature(btRaceImg, btWeapon: Byte; wAppr: Word): Integer;
begin
  Result := MakeLong(MakeWord(btRaceImg, btWeapon), wAppr);
end;
end.

